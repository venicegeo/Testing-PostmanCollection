{
	"info": {
		"name": "Ingest_and_Deployment",
		"_postman_id": "be3a1581-001a-6275-73c1-29c806aa1c12",
		"description": "",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "1_Startup",
			"description": "",
			"item": [
				{
					"name": "Hello, pz-gateway!",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Says Hello!\"] = responseBody.has('Hello');",
									"postman.setEnvironmentVariable('retry_loop',0);",
									"postman.setEnvironmentVariable('max_retries', 9);",
									"postman.setEnvironmentVariable('Ingested Text', 'This is the ingested text for integration tests!');",
									"postman.setEnvironmentVariable('Ingested Geojson', '{\"type\": \"FeatureCollection\",\"features\": [{\"type\": \"Feature\",\"geometry\": {\"type\": \"Point\",\"coordinates\": [102.0,0.5]},\"properties\": {\"prop0\": \"value0\"}},{\"type\": \"Feature\",\"geometry\": {\"type\": \"Point\",\"coordinates\": [106.0,4]},\"properties\": {\"prop0\": \"value0\"}}]}');",
									"postman.setEnvironmentVariable('wait_time','5000');",
									"postman.setEnvironmentVariable('jobId','');",
									"postman.setEnvironmentVariable('jobId_text','');",
									"postman.setEnvironmentVariable('dataId_text','');",
									"postman.setEnvironmentVariable('jobId_geojson','');",
									"postman.setEnvironmentVariable('dataId_geojson','');",
									"postman.setEnvironmentVariable('jobId_raster','');",
									"postman.setEnvironmentVariable('dataId_raster','');",
									"postman.setEnvironmentVariable('jobId_shape','');",
									"postman.setEnvironmentVariable('dataId_shape','');",
									"postman.setEnvironmentVariable('jobId_external','');",
									"postman.setEnvironmentVariable('dataId_external','');",
									"postman.setEnvironmentVariable('deploymentId_geojson','');",
									"postman.setEnvironmentVariable('deploymentId_external','');",
									"postman.setEnvironmentVariable('deploymentGroupId','');",
									"postman.setEnvironmentVariable('deploymentId_raster','');",
									"postman.setEnvironmentVariable('deploymentId_shape','');",
									"postman.setEnvironmentVariable('capabilitiesUrl','http://google.com/garbage');",
									"postman.setEnvironmentVariable('dataId_geojson_large','');",
									"postman.setEnvironmentVariable('deploymentId_geojson_large','');"
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									"console.log(\"~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\");",
									"console.log(\"< < < < < < < < < < < < < START-UP > > > > > > > > > > > \");",
									"console.log(\"   These tests create required environment variables.    \");",
									"console.log(\"    Any failures here will cause other tests to fail.    \");",
									"console.log(\"            DO NOT PUSH if these tests fail.             \");",
									"console.log(\"~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\");"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": ""
							}
						],
						"body": {},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								""
							]
						},
						"description": "Simple Health check to pz-gateway.  Postman Environemnt Variables are initialized in this step."
					},
					"response": []
				},
				{
					"name": "Get Key",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 200\"] = responseCode.code === 200;",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"var parseJSON = eval(postman.getEnvironmentVariable('parseJSON'));",
									"var data = parseJSON(tests, responseBody);",
									"",
									"if (testLevels(tests, data, 'uuid')) {",
									"    postman.setEnvironmentVariable('API Key', data.uuid);",
									"} else {",
									"    // postman.setNextRequest('');",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{cert1}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/v2/key",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"v2",
								"key"
							]
						},
						"description": "Retrieve an API key for testing."
					},
					"response": []
				},
				{
					"name": "Ingest Text",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 201\"] = responseCode.code === 201;",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"var parseJSON = eval(postman.getEnvironmentVariable('parseJSON'));",
									"var data = parseJSON(tests, responseBody);",
									"",
									"if (testLevels(tests, data, 'data.jobId')) {",
									"    postman.setEnvironmentVariable(\"jobId_text\",data.data.jobId);",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": ""
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"data\": {\r\n    \"dataType\": {\r\n        \"content\": \"{{Ingested Text}}\",\r\n        \"type\": \"text\"\r\n    },\r\n    \"metadata\": {\r\n        \"description\": \"A file for integration tests.\"\r\n    }\r\n  },\r\n  \"host\": false,\r\n  \"type\": \"ingest\"\r\n}"
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/data",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"data"
							]
						},
						"description": "Ingest text."
					},
					"response": []
				},
				{
					"name": "Get Text dataId",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var wait = eval(postman.getEnvironmentVariable('wait'));",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"tests[\"Status code is 200\"] = responseCode.code === 200;",
									"",
									"var data = JSON.parse(responseBody);",
									"if (testLevels(tests, data, 'data.status')) {",
									"    if (data.data.status === 'Running' || data.data.status === 'Submitted') {",
									"        if (postman.getEnvironmentVariable('retry_loop') < postman.getEnvironmentVariable('max_retries')) {",
									"            postman.setEnvironmentVariable('retry_loop', parseInt(postman.getEnvironmentVariable('retry_loop')) + 1);",
									"            postman.setNextRequest('Get Text dataId');",
									"            wait(parseInt(postman.getEnvironmentVariable('wait_time')));",
									"        }",
									"        else {",
									"            tests[\"Job finished in time\"] = false;",
									"            postman.setEnvironmentVariable('retry_loop',0);",
									"        }",
									"    }",
									"    else if (data.data.status === 'Success') {",
									"        postman.setEnvironmentVariable('retry_loop',0);",
									"        tests[\"Job finished in time\"] = true;",
									"        if (testLevels(tests, data, 'data.result.dataId')) {",
									"            postman.setEnvironmentVariable(\"dataId_text\", data.data.result.dataId);",
									"        }",
									"    }",
									"    else {",
									"        tests[\"status should not be \" + data.data.status] = false;",
									"        postman.setEnvironmentVariable('retry_loop',0);",
									"    }",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"type": "any"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": ""
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/job/{{jobId_text}}",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"job",
								"{{jobId_text}}"
							]
						},
						"description": "Check the job status of the ingest text job to get the dataId.  Repeat up to 10 times until the job is successful."
					},
					"response": []
				},
				{
					"name": "Ingest GeoJSON",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 201\"] = responseCode.code === 201;",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"var parseJSON = eval(postman.getEnvironmentVariable('parseJSON'));",
									"var data = parseJSON(tests, responseBody);",
									"",
									"if (testLevels(tests, data, 'data.jobId')) {",
									"    postman.setEnvironmentVariable(\"jobId_geojson\",data.data.jobId);",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"type": "any"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": ""
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "data",
									"type": "text",
									"value": "{ \"type\": \"ingest\", \"host\": \"true\", \"data\" : { \"dataType\": { \"type\": \"geojson\" }, \"metadata\": { \"name\": \"Test.geojson\", \"description\": \"A file for integration tests.\", \"classType\": { \"classification\": \"unclassified\" } } } }"
								},
								{
									"key": "file",
									"type": "file",
									"src": "Test.geojson"
								}
							]
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/data/file",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"data",
								"file"
							]
						},
						"description": "Ingest a local geoJSON file into piazza."
					},
					"response": []
				},
				{
					"name": "Get GeoJSON dataId",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var wait = eval(postman.getEnvironmentVariable('wait'));",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"tests[\"Status code is 200\"] = responseCode.code === 200;",
									"",
									"var data = JSON.parse(responseBody);",
									"if (testLevels(tests, data, 'data.status')) {",
									"    if (data.data.status === 'Running' || data.data.status === 'Submitted') {",
									"        if (postman.getEnvironmentVariable('retry_loop') < postman.getEnvironmentVariable('max_retries')) {",
									"            postman.setEnvironmentVariable('retry_loop', parseInt(postman.getEnvironmentVariable('retry_loop')) + 1);",
									"            postman.setNextRequest('Get GeoJSON dataId');",
									"            wait(parseInt(postman.getEnvironmentVariable('wait_time')));",
									"        }",
									"        else {",
									"            tests[\"Job finished in time\"] = false;",
									"            postman.setEnvironmentVariable('retry_loop',0);",
									"        }",
									"    }",
									"    else if (data.data.status === 'Success') {",
									"        postman.setEnvironmentVariable('retry_loop',0);",
									"        tests[\"Job finished in time\"] = true;",
									"        if (testLevels(tests, data, 'data.result.dataId')) {",
									"            postman.setEnvironmentVariable(\"dataId_geojson\", data.data.result.dataId);",
									"        }",
									"    }",
									"    else {",
									"        tests[\"status should not be \" + data.data.status] = false;",
									"        postman.setEnvironmentVariable('retry_loop',0);",
									"    }",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"type": "any"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": ""
							}
						],
						"body": {},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/job/{{jobId_geojson}}",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"job",
								"{{jobId_geojson}}"
							]
						},
						"description": "Check the job status of the ingest geoJSON job to get the dataId.  Repeat up to 10 times until the job is successful."
					},
					"response": []
				},
				{
					"name": "Ingest Raster",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 201\"] = responseCode.code === 201;",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"var parseJSON = eval(postman.getEnvironmentVariable('parseJSON'));",
									"var data = parseJSON(tests, responseBody);",
									"",
									"if (testLevels(tests, data, 'data.jobId')) {",
									"    postman.setEnvironmentVariable(\"jobId_raster\",data.data.jobId);",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"type": "any"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": ""
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "data",
									"type": "text",
									"value": "{ \"type\": \"ingest\", \"host\": \"true\", \"data\" : { \"dataType\": { \"type\": \"raster\" }, \"metadata\": { \"name\": \"terrametrics.tif\", \"description\": \"A file for integration tests.\", \"classType\": { \"classification\": \"unclassified\" } } } }"
								},
								{
									"key": "file",
									"type": "file",
									"src": "terrametrics.tif"
								}
							]
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/data/file",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"data",
								"file"
							]
						},
						"description": "Ingest a local raster file into piazza."
					},
					"response": []
				},
				{
					"name": "Get Raster dataId",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var wait = eval(postman.getEnvironmentVariable('wait'));",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"tests[\"Status code is 200\"] = responseCode.code === 200;",
									"",
									"var data = JSON.parse(responseBody);",
									"if (testLevels(tests, data, 'data.status')) {",
									"    if (data.data.status === 'Running' || data.data.status === 'Submitted') {",
									"        if (postman.getEnvironmentVariable('retry_loop') < postman.getEnvironmentVariable('max_retries')) {",
									"            postman.setEnvironmentVariable('retry_loop', parseInt(postman.getEnvironmentVariable('retry_loop')) + 1);",
									"            postman.setNextRequest('Get Raster dataId');",
									"            wait(parseInt(postman.getEnvironmentVariable('wait_time')));",
									"        }",
									"        else {",
									"            tests[\"Job finished in time\"] = false;",
									"            postman.setEnvironmentVariable('retry_loop',0);",
									"        }",
									"    }",
									"    else if (data.data.status === 'Success') {",
									"        postman.setEnvironmentVariable('retry_loop',0);",
									"        tests[\"Job finished in time\"] = true;",
									"        if (testLevels(tests, data, 'data.result.dataId')) {",
									"            postman.setEnvironmentVariable(\"dataId_raster\", data.data.result.dataId);",
									"        }",
									"    }",
									"    else {",
									"        tests[\"status should not be \" + data.data.status] = false;",
									"        postman.setEnvironmentVariable('retry_loop',0);",
									"    }",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"type": "any"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": ""
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/job/{{jobId_raster}}",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"job",
								"{{jobId_raster}}"
							]
						},
						"description": "Check the job status of the ingest local raster job to get the dataId.  Repeat up to 10 times until the job is successful."
					},
					"response": []
				},
				{
					"name": "Ingest Shape",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 201\"] = responseCode.code === 201;",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"var parseJSON = eval(postman.getEnvironmentVariable('parseJSON'));",
									"var data = parseJSON(tests, responseBody);",
									"",
									"if (testLevels(tests, data, 'data.jobId')) {",
									"    postman.setEnvironmentVariable(\"jobId_shape\",data.data.jobId);",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"type": "any"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": ""
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "data",
									"type": "text",
									"value": "{ \"type\": \"ingest\", \"host\": \"true\", \"data\" : { \"dataType\": { \"type\": \"shapefile\" }, \"metadata\": { \"name\": \"TestShape.zip\", \"description\": \"A file for integration tests.\", \"classType\": { \"classification\": \"unclassified\" } } } }"
								},
								{
									"key": "file",
									"type": "file",
									"src": "TestShape.zip"
								}
							]
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/data/file",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"data",
								"file"
							]
						},
						"description": "Ingest a local shape file into piazza."
					},
					"response": []
				},
				{
					"name": "Get Shape dataId",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var wait = eval(postman.getEnvironmentVariable('wait'));",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"tests[\"Status code is 200\"] = responseCode.code === 200;",
									"",
									"var data = JSON.parse(responseBody);",
									"if (testLevels(tests, data, 'data.status')) {",
									"    if (data.data.status === 'Running' || data.data.status === 'Submitted') {",
									"        if (postman.getEnvironmentVariable('retry_loop') < postman.getEnvironmentVariable('max_retries')) {",
									"            postman.setEnvironmentVariable('retry_loop', parseInt(postman.getEnvironmentVariable('retry_loop')) + 1);",
									"            postman.setNextRequest('Get Shape dataId');",
									"            wait(parseInt(postman.getEnvironmentVariable('wait_time')));",
									"        }",
									"        else {",
									"            tests[\"Job finished in time\"] = false;",
									"            postman.setEnvironmentVariable('retry_loop',0);",
									"        }",
									"    }",
									"    else if (data.data.status === 'Success') {",
									"        postman.setEnvironmentVariable('retry_loop',0);",
									"        tests[\"Job finished in time\"] = true;",
									"        if (testLevels(tests, data, 'data.result.dataId')) {",
									"            postman.setEnvironmentVariable(\"dataId_shape\", data.data.result.dataId);",
									"        }",
									"    }",
									"    else {",
									"        tests[\"status should not be \" + data.data.status] = false;",
									"        postman.setEnvironmentVariable('retry_loop',0);",
									"    }",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"type": "any"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": ""
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/job/{{jobId_shape}}",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"job",
								"{{jobId_shape}}"
							]
						},
						"description": "Check the job status of the ingest Shape job to get the dataId.  Repeat up to 10 times until the job is successful."
					},
					"response": []
				},
				{
					"name": "Ingest External Raster",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 201\"] = responseCode.code === 201;",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"var parseJSON = eval(postman.getEnvironmentVariable('parseJSON'));",
									"var data = parseJSON(tests, responseBody);",
									"",
									"if (testLevels(tests, data, 'data.jobId')) {",
									"    postman.setEnvironmentVariable(\"jobId_external\",data.data.jobId);",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"type\": \"ingest\",\n  \"host\": \"false\",\n  \"data\": {\n    \"dataType\": {\n      \"type\": \"raster\",\n      \"location\": {\n        \"type\": \"s3\",\n        \"bucketName\": \"external-public-access-test\",\n        \"fileName\": \"elevation.tif\",\n        \"domainName\": \"s3.amazonaws.com\"\n      }\n    },\n    \"metadata\": {\n      \"name\": \"My Test raster external file\",\n      \"description\": \"A file for integration tests.\",\n      \"classType\": \"unclassified\"\n    }\n  }\n}"
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/data",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"data"
							]
						},
						"description": "Ingest an external raster file into piazza."
					},
					"response": []
				},
				{
					"name": "Get External Raster dataId",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var wait = eval(postman.getEnvironmentVariable('wait'));",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"tests[\"Status code is 200\"] = responseCode.code === 200;",
									"",
									"var data = JSON.parse(responseBody);",
									"if (testLevels(tests, data, 'data.status')) {",
									"    if (data.data.status === 'Running' || data.data.status === 'Submitted') {",
									"        if (postman.getEnvironmentVariable('retry_loop') < postman.getEnvironmentVariable('max_retries')) {",
									"            postman.setEnvironmentVariable('retry_loop', parseInt(postman.getEnvironmentVariable('retry_loop')) + 1);",
									"            postman.setNextRequest('Get External Raster dataId');",
									"            wait(parseInt(postman.getEnvironmentVariable('wait_time')));",
									"        }",
									"        else {",
									"            tests[\"Job finished in time\"] = false;",
									"            postman.setEnvironmentVariable('retry_loop',0);",
									"        }",
									"    }",
									"    else if (data.data.status === 'Success') {",
									"        postman.setEnvironmentVariable('retry_loop',0);",
									"        tests[\"Job finished in time\"] = true;",
									"        if (testLevels(tests, data, 'data.result.dataId')) {",
									"            postman.setEnvironmentVariable(\"dataId_external\", data.data.result.dataId);",
									"        }",
									"    }",
									"    else {",
									"        tests[\"status should not be \" + data.data.status] = false;",
									"        postman.setEnvironmentVariable('retry_loop',0);",
									"    }",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"type": "any"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": ""
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/job/{{jobId_external}}",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"job",
								"{{jobId_external}}"
							]
						},
						"description": "Check the job status of the ingestexternal raster job to get the dataId.  Repeat up to 10 times until the job is successful."
					},
					"response": []
				}
			]
		},
		{
			"name": "2_Critical",
			"description": "",
			"item": [
				{
					"name": "Download Text",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"tests[\"Status code is 200\"] = responseCode.code === 200;",
									"",
									"tests[\"Downloaded File has correct content\"] = responseBody === postman.getEnvironmentVariable(\"Ingested Text\");"
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									"console.log(\"~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\");",
									"console.log(\"< < < < < < < < < < < CRITICAL > > > > > > > > > >\");",
									"console.log(\"    These tests represent basic functionality.    \");",
									"console.log(\"         DO NOT PUSH if these tests fail.         \");",
									"console.log(\"~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\");"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"name\": \"{{$timestamp}}\",\r\n  \"mapping\": {\r\n    \"dataId\": \"string\",\r\n    \"dataType\": \"string\",\r\n    \"epsg\": \"short\",\r\n    \"minX\": \"long\",\r\n    \"minY\": \"long\",\r\n    \"maxX\": \"long\",\r\n    \"maxY\": \"long\",\r\n    \"hosted\": \"boolean\"\r\n  }\r\n}  "
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/file/{{dataId_text}}",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"file",
								"{{dataId_text}}"
							]
						},
						"description": "Get the raw text that was previously ingested."
					},
					"response": []
				},
				{
					"name": "Download Geojson",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"tests[\"Status code is 200\"] = responseCode.code === 200;",
									"",
									"tests[\"Downloaded File has correct content\"] = responseBody === postman.getEnvironmentVariable(\"Ingested Geojson\");"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"name\": \"{{$timestamp}}\",\r\n  \"mapping\": {\r\n    \"dataId\": \"string\",\r\n    \"dataType\": \"string\",\r\n    \"epsg\": \"short\",\r\n    \"minX\": \"long\",\r\n    \"minY\": \"long\",\r\n    \"maxX\": \"long\",\r\n    \"maxY\": \"long\",\r\n    \"hosted\": \"boolean\"\r\n  }\r\n}  "
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/file/{{dataId_geojson}}",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"file",
								"{{dataId_geojson}}"
							]
						},
						"description": "Get the raw geoJSON that was previously ingested."
					},
					"response": []
				},
				{
					"name": "Download Raster",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 200\"] = responseCode.code === 200;"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"name\": \"{{$timestamp}}\",\r\n  \"mapping\": {\r\n    \"dataId\": \"string\",\r\n    \"dataType\": \"string\",\r\n    \"epsg\": \"short\",\r\n    \"minX\": \"long\",\r\n    \"minY\": \"long\",\r\n    \"maxX\": \"long\",\r\n    \"maxY\": \"long\",\r\n    \"hosted\": \"boolean\"\r\n  }\r\n}  "
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/file/{{dataId_raster}}",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"file",
								"{{dataId_raster}}"
							]
						},
						"description": "Get the raw raster that was previously ingested (local source)."
					},
					"response": []
				},
				{
					"name": "Download Shape",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 200\"] = responseCode.code === 200;"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"name\": \"{{$timestamp}}\",\r\n  \"mapping\": {\r\n    \"dataId\": \"string\",\r\n    \"dataType\": \"string\",\r\n    \"epsg\": \"short\",\r\n    \"minX\": \"long\",\r\n    \"minY\": \"long\",\r\n    \"maxX\": \"long\",\r\n    \"maxY\": \"long\",\r\n    \"hosted\": \"boolean\"\r\n  }\r\n}  "
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/file/{{dataId_shape}}",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"file",
								"{{dataId_shape}}"
							]
						},
						"description": "Get the raw Shape that was previously ingested."
					},
					"response": []
				},
				{
					"name": "Download External Raster",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 200\"] = responseCode.code === 200;"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"name\": \"{{$timestamp}}\",\r\n  \"mapping\": {\r\n    \"dataId\": \"string\",\r\n    \"dataType\": \"string\",\r\n    \"epsg\": \"short\",\r\n    \"minX\": \"long\",\r\n    \"minY\": \"long\",\r\n    \"maxX\": \"long\",\r\n    \"maxY\": \"long\",\r\n    \"hosted\": \"boolean\"\r\n  }\r\n}  "
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/file/{{dataId_external}}",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"file",
								"{{dataId_external}}"
							]
						},
						"description": "Get the raw raster that was previously ingested (external source)."
					},
					"response": []
				},
				{
					"name": "Deploy Geojson",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 201\"] = responseCode.code === 201;",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"var parseJSON = eval(postman.getEnvironmentVariable('parseJSON'));",
									"var data = parseJSON(tests, responseBody);",
									"",
									"if (testLevels(tests, data, 'data.jobId')) {",
									"    postman.setEnvironmentVariable(\"jobId\",data.data.jobId);",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": ""
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"dataId\": \"{{dataId_geojson}}\",\r\n  \"deploymentType\": \"geoserver\",\r\n  \"type\": \"access\"\r\n}"
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/deployment",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"deployment"
							]
						},
						"description": "Deploy the previously ingested geoJSON to geoserver."
					},
					"response": []
				},
				{
					"name": "Get GeoJSON deploymentId",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 200\"] = responseCode.code === 200;",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"var parseJSON = eval(postman.getEnvironmentVariable('parseJSON'));",
									"var wait = eval(postman.getEnvironmentVariable('wait'));",
									"var data = parseJSON(tests, responseBody);",
									"",
									"var data = JSON.parse(responseBody);",
									"if (testLevels(tests, data, 'data.status')) {",
									"    if (data.data.status === 'Running' || data.data.status === 'Submitted') {",
									"        if (postman.getEnvironmentVariable('retry_loop') < postman.getEnvironmentVariable('max_retries')) {",
									"            postman.setEnvironmentVariable('retry_loop', parseInt(postman.getEnvironmentVariable('retry_loop')) + 1);",
									"            postman.setNextRequest('Get GeoJSON deploymentId');",
									"            wait(parseInt(postman.getEnvironmentVariable('wait_time')));",
									"        }",
									"        else {",
									"            tests[\"Job finished in time (Bug #11544)\"] = false;",
									"            postman.setEnvironmentVariable('retry_loop',0);",
									"        }",
									"    }",
									"    else if (data.data.status === 'Success') {",
									"        postman.setEnvironmentVariable('retry_loop',0);",
									"        tests[\"Job finished in time\"] = true;",
									"        if (testLevels(tests, data, 'data.result.deployment.deploymentId')) {",
									"            postman.setEnvironmentVariable(\"deploymentId_geojson\", data.data.result.deployment.deploymentId);",
									"        }",
									"    }",
									"    else {",
									"        tests[\"status should not be \" + data.data.status] = false;",
									"        postman.setEnvironmentVariable('retry_loop',0);",
									"    }",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"type": "any"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": ""
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/job/{{jobId}}",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"job",
								"{{jobId}}"
							]
						},
						"description": "Check that the GeoJSON deployment was successful to get the deploymentId.  Repeat up to 10 times until the job is successful."
					},
					"response": []
				},
				{
					"name": "Deploy External Raster",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 201\"] = responseCode.code === 201;",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"var parseJSON = eval(postman.getEnvironmentVariable('parseJSON'));",
									"var data = parseJSON(tests, responseBody);",
									"",
									"if (testLevels(tests, data, 'data.jobId')) {",
									"    postman.setEnvironmentVariable(\"jobId\",data.data.jobId);",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": ""
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"dataId\": \"{{dataId_external}}\",\r\n  \"deploymentType\": \"geoserver\",\r\n  \"type\": \"access\"\r\n}"
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/deployment",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"deployment"
							]
						},
						"description": "Deploy the previously ingested external raster to geoserver."
					},
					"response": []
				},
				{
					"name": "Get External Raster deploymentId",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 200\"] = responseCode.code === 200;",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"var parseJSON = eval(postman.getEnvironmentVariable('parseJSON'));",
									"var wait = eval(postman.getEnvironmentVariable('wait'));",
									"var data = parseJSON(tests, responseBody);",
									"",
									"var data = JSON.parse(responseBody);",
									"if (testLevels(tests, data, 'data.status')) {",
									"    if (data.data.status === 'Running' || data.data.status === 'Submitted') {",
									"        if (postman.getEnvironmentVariable('retry_loop') < postman.getEnvironmentVariable('max_retries')) {",
									"            postman.setEnvironmentVariable('retry_loop', parseInt(postman.getEnvironmentVariable('retry_loop')) + 1);",
									"            postman.setNextRequest('Get External Raster deploymentId');",
									"            wait(parseInt(postman.getEnvironmentVariable('wait_time')));",
									"        }",
									"        else {",
									"            tests[\"Job finished in time (Bug #11544)\"] = false;",
									"            postman.setEnvironmentVariable('retry_loop',0);",
									"        }",
									"    }",
									"    else if (data.data.status === 'Success') {",
									"        postman.setEnvironmentVariable('retry_loop',0);",
									"        tests[\"Job finished in time\"] = true;",
									"        if (testLevels(tests, data, 'data.result.deployment.deploymentId')) {",
									"            postman.setEnvironmentVariable(\"deploymentId_external\", data.data.result.deployment.deploymentId);",
									"        }",
									"    }",
									"    else {",
									"        tests[\"status should not be \" + data.data.status] = false;",
									"        postman.setEnvironmentVariable('retry_loop',0);",
									"    }",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"type": "any"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": ""
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/job/{{jobId}}",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"job",
								"{{jobId}}"
							]
						},
						"description": "Check that the (External) Raster deployment was successful to get the deploymentId.  Repeat up to 10 times until the job is successful."
					},
					"response": []
				},
				{
					"name": "Create Group",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 201\"] = responseCode.code === 201;",
									"var data = JSON.parse(responseBody);",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"if (testLevels(tests, data, 'data.deploymentGroupId')) {",
									"    postman.setEnvironmentVariable(\"deploymentGroupId\",data.data.deploymentGroupId);",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": ""
							}
						],
						"body": {},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/deployment/group",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"deployment",
								"group"
							]
						},
						"description": "Create a geoserver deployment group."
					},
					"response": []
				},
				{
					"name": "Deploy Raster into Group",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 201\"] = responseCode.code === 201;",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"var parseJSON = eval(postman.getEnvironmentVariable('parseJSON'));",
									"var data = parseJSON(tests, responseBody);",
									"",
									"if (testLevels(tests, data, 'data.jobId')) {",
									"    postman.setEnvironmentVariable(\"jobId\",data.data.jobId);",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": ""
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"dataId\": \"{{dataId_raster}}\",\r\n  \"deploymentGroupId\": \"{{deploymentGroupId}}\",\r\n  \"deploymentType\": \"geoserver\",\r\n  \"type\": \"access\"\r\n}"
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/deployment",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"deployment"
							]
						},
						"description": "Deploy the previously ingested local raster to a geoserver deployment group."
					},
					"response": []
				},
				{
					"name": "Get Raster deploymentId (in Group)",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 200\"] = responseCode.code === 200;",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"var parseJSON = eval(postman.getEnvironmentVariable('parseJSON'));",
									"var wait = eval(postman.getEnvironmentVariable('wait'));",
									"var data = parseJSON(tests, responseBody);",
									"",
									"var data = JSON.parse(responseBody);",
									"if (testLevels(tests, data, 'data.status')) {",
									"    if (data.data.status === 'Running' || data.data.status === 'Submitted') {",
									"        if (postman.getEnvironmentVariable('retry_loop') < postman.getEnvironmentVariable('max_retries')) {",
									"            postman.setEnvironmentVariable('retry_loop', parseInt(postman.getEnvironmentVariable('retry_loop')) + 1);",
									"            postman.setNextRequest('Get Raster deploymentId (in Group)');",
									"            wait(parseInt(postman.getEnvironmentVariable('wait_time')));",
									"        }",
									"        else {",
									"            tests[\"Job finished in time (Bug #11544)\"] = false;",
									"            postman.setEnvironmentVariable('retry_loop',0);",
									"        }",
									"    }",
									"    else if (data.data.status === 'Success') {",
									"        postman.setEnvironmentVariable('retry_loop',0);",
									"        tests[\"Job finished in time\"] = true;",
									"        if (testLevels(tests, data, 'data.result.deployment.deploymentId')) {",
									"            postman.setEnvironmentVariable(\"deploymentId_raster\", data.data.result.deployment.deploymentId);",
									"        }",
									"    }",
									"    else {",
									"        tests[\"status should not be \" + data.data.status] = false;",
									"        postman.setEnvironmentVariable('retry_loop',0);",
									"    }",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"type": "any"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": ""
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/job/{{jobId}}",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"job",
								"{{jobId}}"
							]
						},
						"description": "Check that the (Local) Raster deployment to a group was successful to get the deploymentId.  Repeat up to 10 times until the job is successful."
					},
					"response": []
				},
				{
					"name": "Deploy Shape into Group",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 201\"] = responseCode.code === 201;",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"var parseJSON = eval(postman.getEnvironmentVariable('parseJSON'));",
									"var data = parseJSON(tests, responseBody);",
									"",
									"if (testLevels(tests, data, 'data.jobId')) {",
									"    postman.setEnvironmentVariable(\"jobId\",data.data.jobId);",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": ""
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"dataId\": \"{{dataId_shape}}\",\r\n  \"deploymentGroupId\": \"{{deploymentGroupId}}\",\r\n  \"deploymentType\": \"geoserver\",\r\n  \"type\": \"access\"\r\n}"
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/deployment",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"deployment"
							]
						},
						"description": "Deploy the previously ingested Shape to a geoserver deployment group."
					},
					"response": []
				},
				{
					"name": "Get Shape deploymentId (in Group)",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 200\"] = responseCode.code === 200;",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"var parseJSON = eval(postman.getEnvironmentVariable('parseJSON'));",
									"var wait = eval(postman.getEnvironmentVariable('wait'));",
									"var data = parseJSON(tests, responseBody);",
									"",
									"var data = JSON.parse(responseBody);",
									"if (testLevels(tests, data, 'data.status')) {",
									"    if (data.data.status === 'Running' || data.data.status === 'Submitted') {",
									"        if (postman.getEnvironmentVariable('retry_loop') < postman.getEnvironmentVariable('max_retries')) {",
									"            postman.setEnvironmentVariable('retry_loop', parseInt(postman.getEnvironmentVariable('retry_loop')) + 1);",
									"            postman.setNextRequest('Get Shape deploymentId (in Group)');",
									"            wait(parseInt(postman.getEnvironmentVariable('wait_time')));",
									"        }",
									"        else {",
									"            tests[\"Job finished in time (Bug #11544)\"] = false;",
									"            postman.setEnvironmentVariable('retry_loop',0);",
									"        }",
									"    }",
									"    else if (data.data.status === 'Success') {",
									"        postman.setEnvironmentVariable('retry_loop',0);",
									"        tests[\"Job finished in time\"] = true;",
									"        if (testLevels(tests, data, 'data.result.deployment.deploymentId')) {",
									"            postman.setEnvironmentVariable(\"deploymentId_shape\", data.data.result.deployment.deploymentId);",
									"        }",
									"    }",
									"    else {",
									"        tests[\"status should not be \" + data.data.status] = false;",
									"        postman.setEnvironmentVariable('retry_loop',0);",
									"    }",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"type": "any"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": ""
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/job/{{jobId}}",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"job",
								"{{jobId}}"
							]
						},
						"description": "Check that the Shape deployment to a group was successful to get the deploymentId.  Repeat up to 10 times until the job is successful."
					},
					"response": []
				}
			]
		},
		{
			"name": "3_Important",
			"description": "",
			"item": [
				{
					"name": "Get Text Metadata",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"tests[\"Status code is 200\"] = responseCode.code === 200;",
									"",
									"var data = JSON.parse(responseBody);",
									"",
									"if (testLevels(tests, data, 'data.dataId')) {",
									"    tests[\"Correct dataId returned\"] = data.data.dataId === postman.getEnvironmentVariable('dataId_text');",
									"}"
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									"console.log(\"~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\");",
									"console.log(\"< < < < < < < < < < < IMPORTANT > > > > > > > > > > >\");",
									"console.log(\"      These tests represent important features.      \");",
									"console.log(\"Use extreme caution when pushing if these tests fail.\");",
									"console.log(\"~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\");"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"name\": \"{{$timestamp}}\",\r\n  \"mapping\": {\r\n    \"dataId\": \"string\",\r\n    \"dataType\": \"string\",\r\n    \"epsg\": \"short\",\r\n    \"minX\": \"long\",\r\n    \"minY\": \"long\",\r\n    \"maxX\": \"long\",\r\n    \"maxY\": \"long\",\r\n    \"hosted\": \"boolean\"\r\n  }\r\n}  "
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/data/{{dataId_text}}",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"data",
								"{{dataId_text}}"
							]
						},
						"description": "Check that you can get the metadata of the ingested text."
					},
					"response": []
				},
				{
					"name": "Get Geojson Metadata",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"tests[\"Status code is 200\"] = responseCode.code === 200;",
									"",
									"var data = JSON.parse(responseBody);",
									"",
									"if (testLevels(tests, data, 'data.dataId')) {",
									"    tests[\"Correct dataId returned\"] = data.data.dataId === postman.getEnvironmentVariable('dataId_geojson');",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"name\": \"{{$timestamp}}\",\r\n  \"mapping\": {\r\n    \"dataId\": \"string\",\r\n    \"dataType\": \"string\",\r\n    \"epsg\": \"short\",\r\n    \"minX\": \"long\",\r\n    \"minY\": \"long\",\r\n    \"maxX\": \"long\",\r\n    \"maxY\": \"long\",\r\n    \"hosted\": \"boolean\"\r\n  }\r\n}  "
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/data/{{dataId_geojson}}",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"data",
								"{{dataId_geojson}}"
							]
						},
						"description": "Check that you can get the metadata of the ingested geoJSON."
					},
					"response": []
				},
				{
					"name": "Get Raster Metadata",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"tests[\"Status code is 200\"] = responseCode.code === 200;",
									"",
									"var data = JSON.parse(responseBody);",
									"",
									"if (testLevels(tests, data, 'data.dataId')) {",
									"    tests[\"Correct dataId returned\"] = data.data.dataId === postman.getEnvironmentVariable('dataId_raster');",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"name\": \"{{$timestamp}}\",\r\n  \"mapping\": {\r\n    \"dataId\": \"string\",\r\n    \"dataType\": \"string\",\r\n    \"epsg\": \"short\",\r\n    \"minX\": \"long\",\r\n    \"minY\": \"long\",\r\n    \"maxX\": \"long\",\r\n    \"maxY\": \"long\",\r\n    \"hosted\": \"boolean\"\r\n  }\r\n}  "
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/data/{{dataId_raster}}",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"data",
								"{{dataId_raster}}"
							]
						},
						"description": "Check that you can get the metadata of the locally ingested raster."
					},
					"response": []
				},
				{
					"name": "Update Shape Metadata",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"tests[\"Status code is 200\"] = responseCode.code === 200;",
									"",
									"var data = JSON.parse(responseBody);",
									"",
									"if (testLevels(tests, data, 'data.message', 'string')) {",
									"    tests[\"Updated message\"] = data.data.message.match(/update/i);",
									"    tests[\"Correct dataId mentioned\"] = data.data.message.match(postman.getEnvironmentVariable('dataId_shape'));",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"name\": \"foo\",\r\n  \"classType\": {\r\n    \"classification\": \"UNCLASSIFIED\"\r\n  }\r\n}"
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/data/{{dataId_shape}}",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"data",
								"{{dataId_shape}}"
							]
						},
						"description": "Update the \"name\" field within the ingested Shape metadata."
					},
					"response": []
				},
				{
					"name": "Get Shape Metadata",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"tests[\"Status code is 200\"] = responseCode.code === 200;",
									"",
									"var data = JSON.parse(responseBody);",
									"",
									"if (testLevels(tests, data, 'data.dataId')) {",
									"    tests[\"Correct dataId returned\"] = data.data.dataId === postman.getEnvironmentVariable('dataId_shape');",
									"}",
									"if (testLevels(tests, data, 'data.metadata.name')) {",
									"    tests[\"Update was successful\"] = data.data.metadata.name === 'foo';",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"name\": \"{{$timestamp}}\",\r\n  \"mapping\": {\r\n    \"dataId\": \"string\",\r\n    \"dataType\": \"string\",\r\n    \"epsg\": \"short\",\r\n    \"minX\": \"long\",\r\n    \"minY\": \"long\",\r\n    \"maxX\": \"long\",\r\n    \"maxY\": \"long\",\r\n    \"hosted\": \"boolean\"\r\n  }\r\n}  "
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/data/{{dataId_shape}}",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"data",
								"{{dataId_shape}}"
							]
						},
						"description": "Check that you can get the metadata of the ingested Shape.\nVerify that the previous metadata update was successful."
					},
					"response": []
				},
				{
					"name": "Get External Raster Metadata",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"tests[\"Status code is 200\"] = responseCode.code === 200;",
									"",
									"var data = JSON.parse(responseBody);",
									"",
									"if (testLevels(tests, data, 'data.dataId')) {",
									"    tests[\"Correct dataId returned\"] = data.data.dataId === postman.getEnvironmentVariable('dataId_external');",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"name\": \"{{$timestamp}}\",\r\n  \"mapping\": {\r\n    \"dataId\": \"string\",\r\n    \"dataType\": \"string\",\r\n    \"epsg\": \"short\",\r\n    \"minX\": \"long\",\r\n    \"minY\": \"long\",\r\n    \"maxX\": \"long\",\r\n    \"maxY\": \"long\",\r\n    \"hosted\": \"boolean\"\r\n  }\r\n}  "
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/data/{{dataId_external}}",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"data",
								"{{dataId_external}}"
							]
						},
						"description": "Check that you can get the metadata of the externally ingested raster."
					},
					"response": []
				},
				{
					"name": "Get Geojson Deployment Metadata",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 200\"] = responseCode.code === 200;",
									"var data = JSON.parse(responseBody);",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"if (testLevels(tests, data, 'data.deployment.deploymentId')) {",
									"    tests[\"Correct deploymentId returned\"] = data.data.deployment.deploymentId === postman.getEnvironmentVariable('deploymentId_geojson');",
									"}",
									"if (testLevels(tests, data, 'data.deployment.capabilitiesUrl') && !postman.getEnvironmentVariable('capabilitiesUrl').match('garbage')) {",
									"    postman.setEnvironmentVariable('capabilitiesUrl', data.data.deployment.capabilitiesUrl);",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": ""
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"dataId\": \"{{dataId_shape}}\",\r\n  \"deploymentGroupId\": \"{{deploymentGroupId}}\",\r\n  \"deploymentType\": \"geoserver\",\r\n  \"type\": \"access\"\r\n}"
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/deployment/{{deploymentId_geojson}}",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"deployment",
								"{{deploymentId_geojson}}"
							]
						},
						"description": "Get the geoJSON deployment metadata."
					},
					"response": []
				},
				{
					"name": "Get Raster Deployment Metadata",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 200\"] = responseCode.code === 200;",
									"var data = JSON.parse(responseBody);",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"if (testLevels(tests, data, 'data.deployment.deploymentId')) {",
									"    tests[\"Correct deploymentId returned\"] = data.data.deployment.deploymentId === postman.getEnvironmentVariable('deploymentId_raster');",
									"}",
									"if (testLevels(tests, data, 'data.deployment.capabilitiesUrl') && postman.getEnvironmentVariable('capabilitiesUrl').match(/garbage/)) {",
									"    postman.setEnvironmentVariable('capabilitiesUrl', data.data.deployment.capabilitiesUrl);",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": ""
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"dataId\": \"{{dataId_shape}}\",\r\n  \"deploymentGroupId\": \"{{deploymentGroupId}}\",\r\n  \"deploymentType\": \"geoserver\",\r\n  \"type\": \"access\"\r\n}"
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/deployment/{{deploymentId_raster}}",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"deployment",
								"{{deploymentId_raster}}"
							]
						},
						"description": "Get the (Local) Raster deployment metadata."
					},
					"response": []
				},
				{
					"name": "Get Shape Deployment Metadata",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 200\"] = responseCode.code === 200;",
									"var data = JSON.parse(responseBody);",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"if (testLevels(tests, data, 'data.deployment.deploymentId')) {",
									"    tests[\"Correct deploymentId returned\"] = data.data.deployment.deploymentId === postman.getEnvironmentVariable('deploymentId_shape');",
									"}",
									"if (testLevels(tests, data, 'data.deployment.capabilitiesUrl') && postman.getEnvironmentVariable('capabilitiesUrl').match(/garbage/)) {",
									"    postman.setEnvironmentVariable('capabilitiesUrl', data.data.deployment.capabilitiesUrl);",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": ""
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"dataId\": \"{{dataId_shape}}\",\r\n  \"deploymentGroupId\": \"{{deploymentGroupId}}\",\r\n  \"deploymentType\": \"geoserver\",\r\n  \"type\": \"access\"\r\n}"
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/deployment/{{deploymentId_shape}}",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"deployment",
								"{{deploymentId_shape}}"
							]
						},
						"description": "Get the Shape deployment metadata."
					},
					"response": []
				},
				{
					"name": "Get External Raster Deployment Metadata",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 200\"] = responseCode.code === 200;",
									"var data = JSON.parse(responseBody);",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"if (testLevels(tests, data, 'data.deployment.deploymentId')) {",
									"    tests[\"Correct deploymentId returned\"] = data.data.deployment.deploymentId === postman.getEnvironmentVariable('deploymentId_external');",
									"}",
									"if (testLevels(tests, data, 'data.deployment.capabilitiesUrl') && postman.getEnvironmentVariable('capabilitiesUrl').match(/garbage/)) {",
									"    postman.setEnvironmentVariable('capabilitiesUrl', data.data.deployment.capabilitiesUrl);",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": ""
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"dataId\": \"{{dataId_shape}}\",\r\n  \"deploymentGroupId\": \"{{deploymentGroupId}}\",\r\n  \"deploymentType\": \"geoserver\",\r\n  \"type\": \"access\"\r\n}"
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/deployment/{{deploymentId_external}}",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"deployment",
								"{{deploymentId_external}}"
							]
						},
						"description": "Get the (External) Raster deployment metadata."
					},
					"response": []
				},
				{
					"name": "Validate capabilitiesUrl",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 200\"] = responseCode.code === 200;"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"body": {},
						"url": {
							"raw": "{{capabilitiesUrl}}",
							"host": [
								"{{capabilitiesUrl}}"
							]
						},
						"description": "Check that the \"capabilitiesUrl\" from deployment metadata is a valid URL."
					},
					"response": []
				},
				{
					"name": "List Data",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"tests[\"Status code is 200\"] = responseCode.code === 200;",
									"var data = JSON.parse(responseBody);",
									"",
									"var found_external = false;",
									"var found_geojson = false;",
									"var found_raster = false;",
									"var found_shape = false;",
									"var found_text = false;",
									"",
									"if (testLevels(tests, data, 'data', 'array')) {",
									"    for (i = 0; i < data.data.length; i++) {",
									"        if (testLevels(tests, data.data[i], 'dataId', 'skip', 'data[]')) {",
									"            found_external = (found_external || data.data[i].dataId === postman.getEnvironmentVariable('dataId_external'));",
									"            found_geojson = (found_geojson || data.data[i].dataId === postman.getEnvironmentVariable('dataId_geojson'));",
									"            found_raster = (found_raster || data.data[i].dataId === postman.getEnvironmentVariable('dataId_raster'));",
									"            found_shape = (found_shape || data.data[i].dataId === postman.getEnvironmentVariable('dataId_shape'));",
									"            found_text = (found_text || data.data[i].dataId === postman.getEnvironmentVariable('dataId_text'));",
									"        }",
									"    }",
									"}",
									"",
									"tests[\"Ingested External Raster data found in list\"] = found_external;",
									"tests[\"Ingested GeoJSON data found in list\"] = found_geojson;",
									"tests[\"Ingested Raster data found in list\"] = found_raster;",
									"tests[\"Ingested Shape data found in list\"] = found_shape;",
									"tests[\"Ingested Text data found in list\"] = found_text;"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"name\": \"{{$timestamp}}\",\r\n  \"mapping\": {\r\n    \"dataId\": \"string\",\r\n    \"dataType\": \"string\",\r\n    \"epsg\": \"short\",\r\n    \"minX\": \"long\",\r\n    \"minY\": \"long\",\r\n    \"maxX\": \"long\",\r\n    \"maxY\": \"long\",\r\n    \"hosted\": \"boolean\"\r\n  }\r\n}  "
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/data?perPage=200&sortBy=metadata.createdOn&order=desc",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"data"
							],
							"query": [
								{
									"key": "perPage",
									"value": "200"
								},
								{
									"key": "sortBy",
									"value": "metadata.createdOn"
								},
								{
									"key": "order",
									"value": "desc"
								}
							]
						},
						"description": "List all ingested data, making sure that the data ingested in this suite of tests is present."
					},
					"response": []
				},
				{
					"name": "List Deployments",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"tests[\"Status code is 200\"] = responseCode.code === 200;",
									"var data = JSON.parse(responseBody);",
									"",
									"var found_external = false;",
									"var found_geojson = false;",
									"var found_raster = false;",
									"var found_shape = false;",
									"",
									"if (testLevels(tests, data, 'data', 'array')) {",
									"    for (i = 0; i < data.data.length; i++) {",
									"        if (testLevels(tests, data.data[i], 'deploymentId', 'skip', 'data[]')) {",
									"            found_external = (found_external || data.data[i].deploymentId === postman.getEnvironmentVariable('deploymentId_external'));",
									"            found_geojson = (found_geojson || data.data[i].deploymentId === postman.getEnvironmentVariable('deploymentId_geojson'));",
									"            found_raster = (found_raster || data.data[i].deploymentId === postman.getEnvironmentVariable('deploymentId_raster'));",
									"            found_shape = (found_shape || data.data[i].deploymentId === postman.getEnvironmentVariable('deploymentId_shape'));",
									"        }",
									"    }",
									"}",
									"",
									"",
									"tests[\"Ingested External Raster deployment found in list\"] = found_external;",
									"tests[\"Ingested GeoJSON deployment found in list\"] = found_geojson;",
									"tests[\"Ingested Raster deployment found in list\"] = found_raster;",
									"tests[\"Ingested Shape deployment found in list\"] = found_shape;"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"name\": \"{{$timestamp}}\",\r\n  \"mapping\": {\r\n    \"dataId\": \"string\",\r\n    \"dataType\": \"string\",\r\n    \"epsg\": \"short\",\r\n    \"minX\": \"long\",\r\n    \"minY\": \"long\",\r\n    \"maxX\": \"long\",\r\n    \"maxY\": \"long\",\r\n    \"hosted\": \"boolean\"\r\n  }\r\n}  "
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/deployment?perPage=200&sortBy=createdOn&order=desc",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"deployment"
							],
							"query": [
								{
									"key": "perPage",
									"value": "200"
								},
								{
									"key": "sortBy",
									"value": "createdOn"
								},
								{
									"key": "order",
									"value": "desc"
								}
							]
						},
						"description": "Check that the deployments created in this suite of tests are present in the list of deployments."
					},
					"response": []
				},
				{
					"name": "Large - Ingest GeoJSON",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 201\"] = responseCode.code === 201;",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"var parseJSON = eval(postman.getEnvironmentVariable('parseJSON'));",
									"var data = parseJSON(tests, responseBody);",
									"",
									"if (testLevels(tests, data, 'data.jobId')) {",
									"    postman.setEnvironmentVariable(\"jobId\",data.data.jobId);",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"type": "any"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": ""
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "data",
									"type": "text",
									"value": "{ \"type\": \"ingest\", \"host\": \"true\", \"data\" : { \"dataType\": { \"type\": \"geojson\" }, \"metadata\": { \"name\": \"Test.geojson\", \"description\": \"A file for integration tests.\", \"classType\": { \"classification\": \"unclassified\" } } } }"
								},
								{
									"key": "file",
									"type": "file",
									"src": "beachfront.geojson"
								}
							]
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/data/file",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"data",
								"file"
							]
						},
						"description": "Ingest a large (~ 5MB) geoJSON file into piazza."
					},
					"response": []
				},
				{
					"name": "Large - Get GeoJSON dataId",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 200\"] = responseCode.code === 200;",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"var parseJSON = eval(postman.getEnvironmentVariable('parseJSON'));",
									"var wait = eval(postman.getEnvironmentVariable('wait'));",
									"var data = parseJSON(tests, responseBody);",
									"",
									"var data = JSON.parse(responseBody);",
									"if (testLevels(tests, data, 'data.status')) {",
									"    if (data.data.status === 'Running' || data.data.status === 'Submitted') {",
									"        if (postman.getEnvironmentVariable('retry_loop') < postman.getEnvironmentVariable('max_retries')) {",
									"            postman.setEnvironmentVariable('retry_loop', parseInt(postman.getEnvironmentVariable('retry_loop')) + 1);",
									"            postman.setNextRequest('Large - Get GeoJSON dataId');",
									"            wait(10000); // Longer because of larger file.",
									"        }",
									"        else {",
									"            tests[\"Job finished in time\"] = false;",
									"            postman.setEnvironmentVariable('retry_loop',0);",
									"        }",
									"    }",
									"    else if (data.data.status === 'Success') {",
									"        postman.setEnvironmentVariable('retry_loop',0);",
									"        tests[\"Job finished in time\"] = true;",
									"        if (testLevels(tests, data, 'data.result.dataId')) {",
									"            postman.setEnvironmentVariable(\"dataId_geojson_large\", data.data.result.dataId);",
									"        }",
									"    }",
									"    else {",
									"        tests[\"status should not be \" + data.data.status] = false;",
									"        postman.setEnvironmentVariable('retry_loop',0);",
									"    }",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"type": "any"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": ""
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/job/{{jobId}}",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"job",
								"{{jobId}}"
							]
						},
						"description": "Check the job status of the ingest large (~5 MB) geoJSON job to get the dataId.  Repeat up to 10 times until the job is successful."
					},
					"response": []
				},
				{
					"name": "Large - Download Geojson",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"tests[\"Status code is 200\"] = responseCode.code === 200;"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"name\": \"{{$timestamp}}\",\r\n  \"mapping\": {\r\n    \"dataId\": \"string\",\r\n    \"dataType\": \"string\",\r\n    \"epsg\": \"short\",\r\n    \"minX\": \"long\",\r\n    \"minY\": \"long\",\r\n    \"maxX\": \"long\",\r\n    \"maxY\": \"long\",\r\n    \"hosted\": \"boolean\"\r\n  }\r\n}  "
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/file/{{dataId_geojson_large}}",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"file",
								"{{dataId_geojson_large}}"
							]
						},
						"description": "Get the raw, large (~5 MB) geoJSON that was previously ingested."
					},
					"response": []
				},
				{
					"name": "Large - Deploy Geojson to Group",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 201\"] = responseCode.code === 201;",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"var parseJSON = eval(postman.getEnvironmentVariable('parseJSON'));",
									"var data = parseJSON(tests, responseBody);",
									"",
									"if (testLevels(tests, data, 'data.jobId')) {",
									"    postman.setEnvironmentVariable(\"jobId\",data.data.jobId);",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": ""
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"dataId\": \"{{dataId_geojson_large}}\",\r\n  \"deploymentGroupId\": \"{{deploymentGroupId}}\",\r\n  \"deploymentType\": \"geoserver\",\r\n  \"type\": \"access\"\r\n}"
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/deployment",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"deployment"
							]
						},
						"description": "Deploy the previously ingested large (~5 MB) geoJSON to a geoserver deployment group."
					},
					"response": []
				},
				{
					"name": "Large - Get GeoJSON deploymentId",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 200\"] = responseCode.code === 200;",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"var parseJSON = eval(postman.getEnvironmentVariable('parseJSON'));",
									"var wait = eval(postman.getEnvironmentVariable('wait'));",
									"var data = parseJSON(tests, responseBody);",
									"",
									"var data = JSON.parse(responseBody);",
									"if (testLevels(tests, data, 'data.status')) {",
									"    if (data.data.status === 'Running' || data.data.status === 'Submitted') {",
									"        if (postman.getEnvironmentVariable('retry_loop') < postman.getEnvironmentVariable('max_retries')) {",
									"            postman.setEnvironmentVariable('retry_loop', parseInt(postman.getEnvironmentVariable('retry_loop')) + 1);",
									"            postman.setNextRequest('Large - Get GeoJSON deploymentId');",
									"            wait(parseInt(postman.getEnvironmentVariable('wait_time')));",
									"        }",
									"        else {",
									"            tests[\"Job finished in time (Bug #11544)\"] = false;",
									"            postman.setEnvironmentVariable('retry_loop',0);",
									"        }",
									"    }",
									"    else if (data.data.status === 'Success') {",
									"        postman.setEnvironmentVariable('retry_loop',0);",
									"        tests[\"Job finished in time\"] = true;",
									"        if (testLevels(tests, data, 'data.result.deployment.deploymentId')) {",
									"            postman.setEnvironmentVariable(\"deploymentId_geojson_large\", data.data.result.deployment.deploymentId);",
									"        }",
									"    }",
									"    else {",
									"        tests[\"status should not be \" + data.data.status] = false;",
									"        postman.setEnvironmentVariable('retry_loop',0);",
									"    }",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"type": "any"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": ""
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/job/{{jobId}}",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"job",
								"{{jobId}}"
							]
						},
						"description": "Check that the large (~5 MB) geoJSON deployment to a group was successful to get the deploymentId.  Repeat up to 10 times until the job is successful."
					},
					"response": []
				},
				{
					"name": "Complex Query",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"tests[\"Status code is 200 (Bug #11888)\"] = responseCode.code === 200;",
									"var data = JSON.parse(responseBody);",
									"",
									"var found_external = false;",
									"var found_geojson = false;",
									"var found_raster = false;",
									"var found_shape = false;",
									"var found_text = false;",
									"",
									"if (testLevels(tests, data, 'data', 'array')) {",
									"    for (i = 0; i < data.data.length; i++) {",
									"        if (testLevels(tests, data.data[i], 'dataId', 'skip', 'data[]')) {",
									"            found_external = (found_external || data.data[i].dataId === postman.getEnvironmentVariable('dataId_external'));",
									"            found_geojson = (found_geojson || data.data[i].dataId === postman.getEnvironmentVariable('dataId_geojson'));",
									"            found_raster = (found_raster || data.data[i].dataId === postman.getEnvironmentVariable('dataId_raster'));",
									"            found_shape = (found_shape || data.data[i].dataId === postman.getEnvironmentVariable('dataId_shape'));",
									"            found_text = (found_text || data.data[i].dataId === postman.getEnvironmentVariable('dataId_text'));",
									"        }",
									"    }",
									"}",
									"",
									"tests[\"Ingested GeoJSON data found in list\"] = found_geojson;",
									"tests[\"Ingested External Raster data found in list\"] = found_external;",
									"tests[\"Ingested Raster data found in list\"] = found_raster;",
									"tests[\"Ingested Shape data found in list\"] = found_shape;",
									"tests[\"Ingested Text data found in list\"] = found_text;"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": ""
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"query\": {\n        \"match_all\": {}\n    }\n}"
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/data/query?perPage=200",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"data",
								"query"
							],
							"query": [
								{
									"key": "perPage",
									"value": "200"
								}
							]
						},
						"description": "Check that the deployments created in this suite of tests are present in the result of an Elastic Search query.\nThis is a \"match_all\" query."
					},
					"response": []
				}
			]
		},
		{
			"name": "4_Low",
			"description": "",
			"item": [
				{
					"name": "Get Text Metadata Details",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"tests[\"Status code is 200\"] = responseCode.code === 200;",
									"",
									"var data = JSON.parse(responseBody);",
									"",
									"if (testLevels(tests, data, 'data.dataId')) {",
									"    tests[\"Correct dataId\"] = data.data.dataId === postman.getEnvironmentVariable('dataId_text');",
									"}",
									"if (testLevels(tests, data, 'data.dataType.type')) {",
									"    tests[\"Type is 'text'\"] = data.data.dataType.type === 'text';",
									"}",
									"if (testLevels(tests, data, 'data.dataType.content')) {",
									"    tests[\"Correct Content\"] = data.data.dataType.content === postman.getEnvironmentVariable('Ingested Text');",
									"}",
									"if (testLevels(tests, data, 'data.metadata.description')) {",
									"    tests[\"Correct Description\"] = data.data.metadata.description === 'A file for integration tests.';",
									"}",
									"if (testLevels(tests, data, 'data.metadata.createdBy')) {",
									"    tests[\"Correct createdBy\"] = data.data.metadata.createdBy === postman.getEnvironmentVariable('username');",
									"}",
									"if (testLevels(tests, data, 'data.metadata.createdOn', 'string')) {",
									"    tests[\"Date Generated\"] = data.data.metadata.createdOn.match(/\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}/);",
									"    tests[\"Created in the last half hour\"] = (Date.now() - Date.parse(data.data.metadata.createdOn)) <= 1800000;",
									"    postman.setEnvironmentVariable('orig_date', data.data.metadata.createdOn);",
									"}",
									"if (testLevels(tests, data, 'data.metadata.createdByJobId')) {",
									"    tests[\"Correct createdByJobId\"] = data.data.metadata.createdByJobId === postman.getEnvironmentVariable('jobId_text');",
									"}"
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									"console.log(\"~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\");",
									"console.log(\"< < < < < < < < < < < < LOW > > > > > > > > > > > \");",
									"console.log(\"  These tests represent less-important features.  \");",
									"console.log(\"More attention is given to options and edge cases.\");",
									"console.log(\"You may push if these tests fail, but be careful. \");",
									"console.log(\"~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\");"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"name\": \"{{$timestamp}}\",\r\n  \"mapping\": {\r\n    \"dataId\": \"string\",\r\n    \"dataType\": \"string\",\r\n    \"epsg\": \"short\",\r\n    \"minX\": \"long\",\r\n    \"minY\": \"long\",\r\n    \"maxX\": \"long\",\r\n    \"maxY\": \"long\",\r\n    \"hosted\": \"boolean\"\r\n  }\r\n}  "
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/data/{{dataId_text}}",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"data",
								"{{dataId_text}}"
							]
						},
						"description": "Validate the details of the ingested text metadata."
					},
					"response": []
				},
				{
					"name": "Get geoJSON Metadata Details",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"tests[\"Status code is 200\"] = responseCode.code === 200;",
									"",
									"var data = JSON.parse(responseBody);",
									"",
									"if (testLevels(tests, data, 'data.dataId')) {",
									"    tests[\"Correct dataId\"] = data.data.dataId === postman.getEnvironmentVariable('dataId_geojson');",
									"}",
									"if (testLevels(tests, data, 'data.dataType.type')) {",
									"    tests[\"Type is 'geojson'\"] = data.data.dataType.type === 'geojson';",
									"}",
									"if (testLevels(tests, data, 'data.metadata.description')) {",
									"    tests[\"Correct Description\"] = data.data.metadata.description === 'A file for integration tests.';",
									"}",
									"if (testLevels(tests, data, 'data.metadata.createdBy')) {",
									"    tests[\"Correct createdBy\"] = data.data.metadata.createdBy === postman.getEnvironmentVariable('username');",
									"}",
									"if (testLevels(tests, data, 'data.metadata.createdOn', 'string')) {",
									"    tests[\"Date Generated\"] = data.data.metadata.createdOn.match(/\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}/);",
									"    tests[\"Created in the last half hour\"] = (Date.now() - Date.parse(data.data.metadata.createdOn)) <= 1800000;",
									"}",
									"if (testLevels(tests, data, 'data.metadata.createdByJobId')) {",
									"    tests[\"Correct createdByJobId\"] = data.data.metadata.createdByJobId === postman.getEnvironmentVariable('jobId_geojson');",
									"}",
									"if (testLevels(tests, data, 'data.metadata.name')) {",
									"    tests[\"Correct name\"] = data.data.metadata.name === 'Test.geojson';",
									"}",
									"if (testLevels(tests, data, 'data.spatialMetadata.minX')) {",
									"    tests[\"Correct minX\"] = data.data.spatialMetadata.minX === 102;",
									"}",
									"if (testLevels(tests, data, 'data.spatialMetadata.maxX')) {",
									"    tests[\"Correct maxX\"] = data.data.spatialMetadata.maxX === 106;",
									"}",
									"if (testLevels(tests, data, 'data.spatialMetadata.minY')) {",
									"    tests[\"Correct minY\"] = data.data.spatialMetadata.minY === 0.5;",
									"}",
									"if (testLevels(tests, data, 'data.spatialMetadata.maxY')) {",
									"    tests[\"Correct maxY\"] = data.data.spatialMetadata.maxY === 4;",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"name\": \"{{$timestamp}}\",\r\n  \"mapping\": {\r\n    \"dataId\": \"string\",\r\n    \"dataType\": \"string\",\r\n    \"epsg\": \"short\",\r\n    \"minX\": \"long\",\r\n    \"minY\": \"long\",\r\n    \"maxX\": \"long\",\r\n    \"maxY\": \"long\",\r\n    \"hosted\": \"boolean\"\r\n  }\r\n}  "
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/data/{{dataId_geojson}}",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"data",
								"{{dataId_geojson}}"
							]
						},
						"description": "Validate the details of the ingested geoJSON metadata."
					},
					"response": []
				},
				{
					"name": "Get Raster Metadata Details",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"tests[\"Status code is 200\"] = responseCode.code === 200;",
									"",
									"var data = JSON.parse(responseBody);",
									"",
									"if (testLevels(tests, data, 'data.dataId')) {",
									"    tests[\"Correct dataId\"] = data.data.dataId === postman.getEnvironmentVariable('dataId_raster');",
									"}",
									"if (testLevels(tests, data, 'data.dataType.type')) {",
									"    tests[\"Type is 'geojson'\"] = data.data.dataType.type === 'raster';",
									"}",
									"if (testLevels(tests, data, 'data.metadata.description')) {",
									"    tests[\"Correct Description\"] = data.data.metadata.description === 'A file for integration tests.';",
									"}",
									"if (testLevels(tests, data, 'data.metadata.createdBy')) {",
									"    tests[\"Correct createdBy\"] = data.data.metadata.createdBy === postman.getEnvironmentVariable('username');",
									"}",
									"if (testLevels(tests, data, 'data.metadata.createdOn', 'string')) {",
									"    tests[\"Date Generated\"] = data.data.metadata.createdOn.match(/\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}/);",
									"    tests[\"Created in the last half hour\"] = (Date.now() - Date.parse(data.data.metadata.createdOn)) <= 1800000;",
									"}",
									"if (testLevels(tests, data, 'data.metadata.createdByJobId')) {",
									"    tests[\"Correct createdByJobId\"] = data.data.metadata.createdByJobId === postman.getEnvironmentVariable('jobId_raster');",
									"}",
									"if (testLevels(tests, data, 'data.metadata.name')) {",
									"    tests[\"Correct name\"] = data.data.metadata.name === 'terrametrics.tif';",
									"}",
									"if (testLevels(tests, data, 'data.spatialMetadata.minX')) {",
									"    tests[\"Correct minX\"] = data.data.spatialMetadata.minX === -48.52855770516021;",
									"}",
									"if (testLevels(tests, data, 'data.spatialMetadata.maxX')) {",
									"    tests[\"Correct maxX\"] = data.data.spatialMetadata.maxX === -48.34313089042421;",
									"}",
									"if (testLevels(tests, data, 'data.spatialMetadata.minY')) {",
									"    tests[\"Correct minY\"] = data.data.spatialMetadata.minY === -6.404746816973356;",
									"}",
									"if (testLevels(tests, data, 'data.spatialMetadata.maxY')) {",
									"    tests[\"Correct maxY\"] = data.data.spatialMetadata.maxY === -6.182956360425359;",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"name\": \"{{$timestamp}}\",\r\n  \"mapping\": {\r\n    \"dataId\": \"string\",\r\n    \"dataType\": \"string\",\r\n    \"epsg\": \"short\",\r\n    \"minX\": \"long\",\r\n    \"minY\": \"long\",\r\n    \"maxX\": \"long\",\r\n    \"maxY\": \"long\",\r\n    \"hosted\": \"boolean\"\r\n  }\r\n}  "
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/data/{{dataId_raster}}",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"data",
								"{{dataId_raster}}"
							]
						},
						"description": "Validate the details of the locally ingested raster metadata."
					},
					"response": []
				},
				{
					"name": "Get Shape Metadata Details",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"tests[\"Status code is 200\"] = responseCode.code === 200;",
									"",
									"var data = JSON.parse(responseBody);",
									"",
									"if (testLevels(tests, data, 'data.dataId')) {",
									"    tests[\"Correct dataId\"] = data.data.dataId === postman.getEnvironmentVariable('dataId_shape');",
									"}",
									"if (testLevels(tests, data, 'data.dataType.type')) {",
									"    tests[\"Type is 'shapefile'\"] = data.data.dataType.type === 'shapefile';",
									"}",
									"if (testLevels(tests, data, 'data.metadata.description')) {",
									"    tests[\"Correct Description\"] = data.data.metadata.description === 'A file for integration tests.';",
									"}",
									"if (testLevels(tests, data, 'data.metadata.createdBy')) {",
									"    tests[\"Correct createdBy\"] = data.data.metadata.createdBy === postman.getEnvironmentVariable('username');",
									"}",
									"if (testLevels(tests, data, 'data.metadata.createdOn', 'string')) {",
									"    tests[\"Date Generated\"] = data.data.metadata.createdOn.match(/\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}/);",
									"    tests[\"Created in the last half hour\"] = (Date.now() - Date.parse(data.data.metadata.createdOn)) <= 1800000;",
									"}",
									"if (testLevels(tests, data, 'data.metadata.createdByJobId')) {",
									"    tests[\"Correct createdByJobId\"] = data.data.metadata.createdByJobId === postman.getEnvironmentVariable('jobId_shape');",
									"}",
									"if (testLevels(tests, data, 'data.metadata.name')) {",
									"    tests[\"Correct name\"] = data.data.metadata.name === 'foo';",
									"}",
									"if (testLevels(tests, data, 'data.spatialMetadata.minX')) {",
									"    tests[\"Correct minX\"] = data.data.spatialMetadata.minX === 102;",
									"}",
									"if (testLevels(tests, data, 'data.spatialMetadata.maxX')) {",
									"    tests[\"Correct maxX\"] = data.data.spatialMetadata.maxX === 106;",
									"}",
									"if (testLevels(tests, data, 'data.spatialMetadata.minY')) {",
									"    tests[\"Correct minY\"] = data.data.spatialMetadata.minY === 0.5;",
									"}",
									"if (testLevels(tests, data, 'data.spatialMetadata.maxY')) {",
									"    tests[\"Correct maxY\"] = data.data.spatialMetadata.maxY === 4;",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"name\": \"{{$timestamp}}\",\r\n  \"mapping\": {\r\n    \"dataId\": \"string\",\r\n    \"dataType\": \"string\",\r\n    \"epsg\": \"short\",\r\n    \"minX\": \"long\",\r\n    \"minY\": \"long\",\r\n    \"maxX\": \"long\",\r\n    \"maxY\": \"long\",\r\n    \"hosted\": \"boolean\"\r\n  }\r\n}  "
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/data/{{dataId_shape}}",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"data",
								"{{dataId_shape}}"
							]
						},
						"description": "Validate the details of the ingested shape metadata."
					},
					"response": []
				},
				{
					"name": "Get External Raster Metadata Details",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"tests[\"Status code is 200\"] = responseCode.code === 200;",
									"",
									"var data = JSON.parse(responseBody);",
									"",
									"if (testLevels(tests, data, 'data.dataId')) {",
									"    tests[\"Correct dataId\"] = data.data.dataId === postman.getEnvironmentVariable('dataId_external');",
									"}",
									"if (testLevels(tests, data, 'data.dataType.type')) {",
									"    tests[\"Type is 'geojson'\"] = data.data.dataType.type === 'raster';",
									"}",
									"if (testLevels(tests, data, 'data.metadata.description')) {",
									"    tests[\"Correct Description\"] = data.data.metadata.description === 'A file for integration tests.';",
									"}",
									"if (testLevels(tests, data, 'data.metadata.createdBy')) {",
									"    tests[\"Correct createdBy\"] = data.data.metadata.createdBy === postman.getEnvironmentVariable('username');",
									"}",
									"if (testLevels(tests, data, 'data.metadata.createdOn', 'string')) {",
									"    tests[\"Date Generated\"] = data.data.metadata.createdOn.match(/\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}/);",
									"    tests[\"Created in the last half hour\"] = (Date.now() - Date.parse(data.data.metadata.createdOn)) <= 1800000;",
									"}",
									"if (testLevels(tests, data, 'data.metadata.createdByJobId')) {",
									"    tests[\"Correct createdByJobId\"] = data.data.metadata.createdByJobId === postman.getEnvironmentVariable('jobId_external');",
									"}",
									"if (testLevels(tests, data, 'data.metadata.name')) {",
									"    tests[\"Correct name\"] = data.data.metadata.name === 'My Test raster external file';",
									"}",
									"if (testLevels(tests, data, 'data.spatialMetadata.minX')) {",
									"    tests[\"Correct minX\"] = data.data.spatialMetadata.minX === 496147.97;",
									"}",
									"if (testLevels(tests, data, 'data.spatialMetadata.maxX')) {",
									"    tests[\"Correct maxX\"] = data.data.spatialMetadata.maxX === 496545.97;",
									"}",
									"if (testLevels(tests, data, 'data.spatialMetadata.minY')) {",
									"    tests[\"Correct minY\"] = data.data.spatialMetadata.minY === 5422119.88;",
									"}",
									"if (testLevels(tests, data, 'data.spatialMetadata.maxY')) {",
									"    tests[\"Correct maxY\"] = data.data.spatialMetadata.maxY === 5422343.88;",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"name\": \"{{$timestamp}}\",\r\n  \"mapping\": {\r\n    \"dataId\": \"string\",\r\n    \"dataType\": \"string\",\r\n    \"epsg\": \"short\",\r\n    \"minX\": \"long\",\r\n    \"minY\": \"long\",\r\n    \"maxX\": \"long\",\r\n    \"maxY\": \"long\",\r\n    \"hosted\": \"boolean\"\r\n  }\r\n}  "
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/data/{{dataId_external}}",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"data",
								"{{dataId_external}}"
							]
						},
						"description": "Validate the details of the externally ingested metadata."
					},
					"response": []
				},
				{
					"name": "Protected Field - Update createdOn",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"var parseJSON = eval(postman.getEnvironmentVariable('parseJSON'));",
									"tests[\"Status code is 400\"] = responseCode.code === 400;",
									"",
									"var data = parseJSON(tests, responseBody);",
									"",
									"if (testLevels(tests, data, 'message', 'string')) {",
									"    tests[\"'Could not update' message\"] = data.message.match(/no.*update/i);",
									"    tests[\"'createdOn' specified\"] = data.message.match(/createdOn/i);",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"createdOn\": \"foo\",\r\n  \"classType\": {\r\n    \"classification\": \"UNCLASSIFIED\" \r\n  }\r\n}"
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/data/{{dataId_text}}",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"data",
								"{{dataId_text}}"
							]
						},
						"description": "Try to update the \"createdOn\" field."
					},
					"response": []
				},
				{
					"name": "Protected Field - Update createdBy",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"var parseJSON = eval(postman.getEnvironmentVariable('parseJSON'));",
									"tests[\"Status code is 400\"] = responseCode.code === 400;",
									"",
									"var data = parseJSON(tests, responseBody);",
									"",
									"if (testLevels(tests, data, 'message', 'string')) {",
									"    tests[\"'Could not update' message\"] = data.message.match(/no.*update/i);",
									"    tests[\"'createdBy' specified\"] = data.message.match(/createdBy/i);",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"createdBy\": \"foo\",\r\n  \"classType\": {\r\n    \"classification\": \"UNCLASSIFIED\" \r\n  }\r\n}"
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/data/{{dataId_text}}",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"data",
								"{{dataId_text}}"
							]
						},
						"description": "Try to update the \"createdBy\" field."
					},
					"response": []
				},
				{
					"name": "Protected Field - Update createdByJobId",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"var parseJSON = eval(postman.getEnvironmentVariable('parseJSON'));",
									"tests[\"Status code is 400\"] = responseCode.code === 400;",
									"",
									"var data = parseJSON(tests, responseBody);",
									"",
									"if (testLevels(tests, data, 'message', 'string')) {",
									"    tests[\"'Could not update' message\"] = data.message.match(/no.*update/i);",
									"    tests[\"'createdByJobId' specified\"] = data.message.match(/createdByJobId/i);",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"createdByJobId\": \"foo\",\r\n  \"classType\": {\r\n    \"classification\": \"UNCLASSIFIED\" \r\n  }\r\n}"
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/data/{{dataId_text}}",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"data",
								"{{dataId_text}}"
							]
						},
						"description": "Try to update the \"createdByJobId\" field."
					},
					"response": []
				},
				{
					"name": "Protected Field - Validate",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"var parseJSON = eval(postman.getEnvironmentVariable('parseJSON'));",
									"tests[\"Status code is 200\"] = responseCode.code === 200;",
									"",
									"var data = parseJSON(tests, responseBody);",
									"",
									"if (testLevels(tests, data, 'data.metadata.createdBy')) {",
									"    tests[\"'createdBy' was not updated\"] = data.data.metadata.createdBy === postman.getEnvironmentVariable('username');",
									"}",
									"if (testLevels(tests, data, 'data.metadata.createdByJobId')) {",
									"    tests[\"'createdByJobId' was not updated\"] = data.data.metadata.createdByJobId === postman.getEnvironmentVariable('jobId_text');",
									"}",
									"if (testLevels(tests, data, 'data.metadata.createdOn')) {",
									"    tests[\"'createdOn' was not updated\"] = data.data.metadata.createdOn === postman.getEnvironmentVariable('orig_date');",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"name\": \"{{$timestamp}}\",\r\n  \"mapping\": {\r\n    \"dataId\": \"string\",\r\n    \"dataType\": \"string\",\r\n    \"epsg\": \"short\",\r\n    \"minX\": \"long\",\r\n    \"minY\": \"long\",\r\n    \"maxX\": \"long\",\r\n    \"maxY\": \"long\",\r\n    \"hosted\": \"boolean\"\r\n  }\r\n}  "
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/data/{{dataId_text}}",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"data",
								"{{dataId_text}}"
							]
						},
						"description": "Check that none of the protected fields were updated."
					},
					"response": []
				},
				{
					"name": "Get Geojson Deployment Metadata Details",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 200\"] = responseCode.code === 200;",
									"var data = JSON.parse(responseBody);",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"if (testLevels(tests, data, 'data.deployment.deploymentId')) {",
									"    tests[\"Correct deploymentId returned\"] = data.data.deployment.deploymentId === postman.getEnvironmentVariable('deploymentId_geojson');",
									"}",
									"testLevels(tests, data, 'data.deployment.capabilitiesUrl');",
									"if (testLevels(tests, data, 'data.deployment.dataId')) {",
									"    tests[\"Correct dataId\"] = data.data.deployment.dataId === postman.getEnvironmentVariable('dataId_geojson');",
									"}",
									"if (testLevels(tests, data, 'data.deployment.layer')) {",
									"    tests[\"Layer matches dataId\"] = data.data.deployment.layer === postman.getEnvironmentVariable('dataId_geojson');",
									"}",
									"if (testLevels(tests, data, 'data.deployment.createdOn', 'string')) {",
									"    tests[\"createdOn Date Generated\"] = data.data.deployment.createdOn.match(/\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}/);",
									"    tests[\"Created in the last half hour\"] = (Date.now() - Date.parse(data.data.deployment.createdOn)) <= 1800000;",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": ""
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"dataId\": \"{{dataId_shape}}\",\r\n  \"deploymentGroupId\": \"{{deploymentGroupId}}\",\r\n  \"deploymentType\": \"geoserver\",\r\n  \"type\": \"access\"\r\n}"
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/deployment/{{deploymentId_geojson}}",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"deployment",
								"{{deploymentId_geojson}}"
							]
						},
						"description": "Validate the details of the geoJSON deployment metadata."
					},
					"response": []
				},
				{
					"name": "Get Raster Deployment Metadata Details",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 200\"] = responseCode.code === 200;",
									"var data = JSON.parse(responseBody);",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"if (testLevels(tests, data, 'data.deployment.deploymentId')) {",
									"    tests[\"Correct deploymentId returned\"] = data.data.deployment.deploymentId === postman.getEnvironmentVariable('deploymentId_raster');",
									"}",
									"testLevels(tests, data, 'data.deployment.capabilitiesUrl');",
									"if (testLevels(tests, data, 'data.deployment.dataId')) {",
									"    tests[\"Correct dataId\"] = data.data.deployment.dataId === postman.getEnvironmentVariable('dataId_raster');",
									"}",
									"if (testLevels(tests, data, 'data.deployment.layer')) {",
									"    tests[\"Layer matches dataId\"] = data.data.deployment.layer === postman.getEnvironmentVariable('dataId_raster');",
									"}",
									"if (testLevels(tests, data, 'data.deployment.createdOn', 'string')) {",
									"    tests[\"createdOn Date Generated\"] = data.data.deployment.createdOn.match(/\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}/);",
									"    tests[\"Created in the last half hour\"] = (Date.now() - Date.parse(data.data.deployment.createdOn)) <= 1800000;",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": ""
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"dataId\": \"{{dataId_shape}}\",\r\n  \"deploymentGroupId\": \"{{deploymentGroupId}}\",\r\n  \"deploymentType\": \"geoserver\",\r\n  \"type\": \"access\"\r\n}"
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/deployment/{{deploymentId_raster}}",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"deployment",
								"{{deploymentId_raster}}"
							]
						},
						"description": "Validate the details of the (Local) Raster deployment metadata."
					},
					"response": []
				},
				{
					"name": "Get Shape Deployment Metadata Details",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 200\"] = responseCode.code === 200;",
									"var data = JSON.parse(responseBody);",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"if (testLevels(tests, data, 'data.deployment.deploymentId')) {",
									"    tests[\"Correct deploymentId returned\"] = data.data.deployment.deploymentId === postman.getEnvironmentVariable('deploymentId_shape');",
									"}",
									"testLevels(tests, data, 'data.deployment.capabilitiesUrl');",
									"if (testLevels(tests, data, 'data.deployment.dataId')) {",
									"    tests[\"Correct dataId\"] = data.data.deployment.dataId === postman.getEnvironmentVariable('dataId_shape');",
									"}",
									"if (testLevels(tests, data, 'data.deployment.layer')) {",
									"    tests[\"Layer matches dataId\"] = data.data.deployment.layer === postman.getEnvironmentVariable('dataId_shape');",
									"}",
									"if (testLevels(tests, data, 'data.deployment.createdOn', 'string')) {",
									"    tests[\"createdOn Date Generated\"] = data.data.deployment.createdOn.match(/\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}/);",
									"    tests[\"Created in the last half hour\"] = (Date.now() - Date.parse(data.data.deployment.createdOn)) <= 1800000;",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": ""
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"dataId\": \"{{dataId_shape}}\",\r\n  \"deploymentGroupId\": \"{{deploymentGroupId}}\",\r\n  \"deploymentType\": \"geoserver\",\r\n  \"type\": \"access\"\r\n}"
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/deployment/{{deploymentId_shape}}",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"deployment",
								"{{deploymentId_shape}}"
							]
						},
						"description": "Validate the details of the Shape deployment metadata."
					},
					"response": []
				},
				{
					"name": "Get External Raster Deployment Metadata Details",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 200\"] = responseCode.code === 200;",
									"var data = JSON.parse(responseBody);",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"if (testLevels(tests, data, 'data.deployment.deploymentId')) {",
									"    tests[\"Correct deploymentId returned\"] = data.data.deployment.deploymentId === postman.getEnvironmentVariable('deploymentId_external');",
									"}",
									"testLevels(tests, data, 'data.deployment.capabilitiesUrl');",
									"if (testLevels(tests, data, 'data.deployment.dataId')) {",
									"    tests[\"Correct dataId\"] = data.data.deployment.dataId === postman.getEnvironmentVariable('dataId_external');",
									"}",
									"if (testLevels(tests, data, 'data.deployment.layer')) {",
									"    tests[\"Layer matches dataId\"] = data.data.deployment.layer === postman.getEnvironmentVariable('dataId_external');",
									"}",
									"if (testLevels(tests, data, 'data.deployment.createdOn', 'string')) {",
									"    tests[\"createdOn Date Generated\"] = data.data.deployment.createdOn.match(/\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}/);",
									"    tests[\"Created in the last half hour\"] = (Date.now() - Date.parse(data.data.deployment.createdOn)) <= 1800000;",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": ""
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"dataId\": \"{{dataId_shape}}\",\r\n  \"deploymentGroupId\": \"{{deploymentGroupId}}\",\r\n  \"deploymentType\": \"geoserver\",\r\n  \"type\": \"access\"\r\n}"
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/deployment/{{deploymentId_external}}",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"deployment",
								"{{deploymentId_external}}"
							]
						},
						"description": "Validate the details of the (External) Raster deployment metadata."
					},
					"response": []
				},
				{
					"name": "Complex Query - Search Description",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"tests[\"Status code is 200 (Bug #11888)\"] = responseCode.code === 200;",
									"var data = JSON.parse(responseBody);",
									"",
									"var found_geojson = false;",
									"var found_raster = false;",
									"var found_shape = false;",
									"var found_text = false;",
									"",
									"if (testLevels(tests, data, 'data', 'array')) {",
									"    for (i = 0; i < data.data.length; i++) {",
									"        if (testLevels(tests, data.data[i], 'dataId', 'skip', 'data[]')) {",
									"            found_geojson = (found_geojson || data.data[i].dataId === postman.getEnvironmentVariable('dataId_geojson'));",
									"            found_raster = (found_raster || data.data[i].dataId === postman.getEnvironmentVariable('dataId_raster'));",
									"            found_shape = (found_shape || data.data[i].dataId === postman.getEnvironmentVariable('dataId_shape'));",
									"            found_text = (found_text || data.data[i].dataId === postman.getEnvironmentVariable('dataId_text'));",
									"        }",
									"    }",
									"}",
									"",
									"tests[\"Ingested GeoJSON data found in list\"] = found_geojson;",
									"tests[\"Ingested Raster data found in list\"] = found_raster;",
									"tests[\"Ingested Shape data found in list\"] = found_shape;",
									"tests[\"Ingested Text data found in list\"] = found_text;"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": ""
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"query\": {\n        \"match\": {\n            \"dataResource.metadata.description\": \"integration\"\n        }\n    }\n}"
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/data/query",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"data",
								"query"
							]
						},
						"description": "Check that the deployments created in this suite of tests are present in the result of an Elastic Search query.\nThis query is checking that \"dataResource.metadata.descritpion\" contains \"integration\"."
					},
					"response": []
				},
				{
					"name": "Complex Query - Search Type (geojson)",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"tests[\"Status code is 200 (Bug #11888)\"] = responseCode.code === 200;",
									"var data = JSON.parse(responseBody);",
									"",
									"var found_geojson = false;",
									"",
									"if (testLevels(tests, data, 'data', 'array')) {",
									"    for (i = 0; i < data.data.length; i++) {",
									"        if (testLevels(tests, data.data[i], 'dataId', 'skip', 'data[]')) {",
									"            found_geojson = (found_geojson || data.data[i].dataId === postman.getEnvironmentVariable('dataId_geojson'));",
									"        }",
									"    }",
									"}",
									"",
									"tests[\"Ingested GeoJSON data found in list\"] = found_geojson;"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": ""
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"query\": {\n        \"match\": {\n            \"dataResource.dataType.type\": \"geojson\"\n        }\n    }\n}"
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/data/query",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"data",
								"query"
							]
						},
						"description": "Check that the geoJSON deployment (and no other deploymens) created in this suite of tests are present in the result of an Elastic Search query.\nThis query is checking that \"dataResource.dataType.type\" contains \"geojson\"."
					},
					"response": []
				},
				{
					"name": "Complex Query - Search Name (TestShape.zip)",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"tests[\"Status code is 200 (Bug #11888)\"] = responseCode.code === 200;",
									"var data = JSON.parse(responseBody);",
									"",
									"var found_shape = false;",
									"",
									"if (testLevels(tests, data, 'data', 'array')) {",
									"    for (i = 0; i < data.data.length; i++) {",
									"        if (testLevels(tests, data.data[i], 'dataId', 'skip', 'data[]')) {",
									"            found_shape = (found_shape || data.data[i].dataId === postman.getEnvironmentVariable('dataId_shape'));",
									"        }",
									"    }",
									"}",
									"",
									"tests[\"Ingested GeoJSON data found in list\"] = found_shape;"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": ""
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"query\": {\n        \"match\": {\n            \"dataResource.metadata.name\": \"foo\"\n        }\n    }\n}"
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/data/query",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"data",
								"query"
							]
						},
						"description": "Check that the Shape deployment (and no other deploymens) created in this suite of tests are present in the result of an Elastic Search query.\nThis query is checking that \"dataResource.metadata.name\" contains \"TestShape.zip\"."
					},
					"response": []
				},
				{
					"name": "List Data with Keyword",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"tests[\"Status code is 200\"] = responseCode.code === 200;",
									"var data = JSON.parse(responseBody);",
									"",
									"var found_geojson = false;",
									"var found_raster = false;",
									"var found_shape = false;",
									"var found_text = false;",
									"var found_keyword = true;",
									"",
									"if (testLevels(tests, data, 'data', 'array')) {",
									"    for (i = 0; i < data.data.length; i++) {",
									"        if (testLevels(tests, data.data[i], 'dataId', 'skip', 'data[]')) {",
									"            found_geojson = (found_geojson || data.data[i].dataId === postman.getEnvironmentVariable('dataId_geojson'));",
									"            found_raster = (found_raster || data.data[i].dataId === postman.getEnvironmentVariable('dataId_raster'));",
									"            found_shape = (found_shape || data.data[i].dataId === postman.getEnvironmentVariable('dataId_shape'));",
									"            found_text = (found_text || data.data[i].dataId === postman.getEnvironmentVariable('dataId_text'));",
									"        }",
									"        found_keyword = found_keyword && JSON.stringify(data.data[i]).match('integration');",
									"    }",
									"    if (testLevels(tests, data, 'pagination.count') && testLevels(tests, data, 'pagination.perPage')) {",
									"        tests[\"Count is correct\"] = data.pagination.count === data.data.length || data.pagination.perPage === data.data.length;",
									"    }",
									"}",
									"",
									"tests[\"Ingested GeoJSON data found in list\"] = found_geojson;",
									"tests[\"Ingested Raster data found in list\"] = found_raster;",
									"tests[\"Ingested Shape data found in list\"] = found_shape;",
									"tests[\"Ingested Text data found in list\"] = found_text;",
									"tests[\"All results contain 'integration'\"] = found_keyword;"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"name\": \"{{$timestamp}}\",\r\n  \"mapping\": {\r\n    \"dataId\": \"string\",\r\n    \"dataType\": \"string\",\r\n    \"epsg\": \"short\",\r\n    \"minX\": \"long\",\r\n    \"minY\": \"long\",\r\n    \"maxX\": \"long\",\r\n    \"maxY\": \"long\",\r\n    \"hosted\": \"boolean\"\r\n  }\r\n}  "
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/data?perPage=200&sortBy=metadata.createdOn&order=desc&keyword=integration",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"data"
							],
							"query": [
								{
									"equals": true,
									"key": "perPage",
									"value": "200"
								},
								{
									"equals": true,
									"key": "sortBy",
									"value": "metadata.createdOn"
								},
								{
									"equals": true,
									"key": "order",
									"value": "desc"
								},
								{
									"equals": true,
									"key": "keyword",
									"value": "integration"
								}
							]
						},
						"description": "List ingested data (filetered with the keyword, \"integration\"), making sure that the data ingested in this suite of tests is present."
					},
					"response": []
				},
				{
					"name": "List Deployment with Keyword (Raster dataId)",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"tests[\"Status code is 200\"] = responseCode.code === 200;",
									"var data = JSON.parse(responseBody);",
									"",
									"var found_raster = false;",
									"var found_keyword = true;",
									"",
									"if (testLevels(tests, data, 'data', 'array')) {",
									"    for (i = 0; i < data.data.length; i++) {",
									"        if (testLevels(tests, data.data[i], 'deploymentId', 'skip', 'data[]')) {",
									"            found_raster = (found_raster || data.data[i].deploymentId === postman.getEnvironmentVariable('deploymentId_raster'));",
									"        }",
									"        found_keyword = found_keyword && JSON.stringify(data.data[i]).match(postman.getEnvironmentVariable('dataId_raster'));",
									"    }",
									"    if (testLevels(tests, data, 'pagination.count') && testLevels(tests, data, 'pagination.perPage')) {",
									"        tests[\"Count is correct\"] = data.pagination.count === data.data.length || data.pagination.perPage === data.data.length;",
									"    }",
									"}",
									"",
									"tests[\"Ingested Raster data found in list\"] = found_raster;",
									"tests[\"All results contain the keyword\"] = found_keyword;"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"name\": \"{{$timestamp}}\",\r\n  \"mapping\": {\r\n    \"dataId\": \"string\",\r\n    \"dataType\": \"string\",\r\n    \"epsg\": \"short\",\r\n    \"minX\": \"long\",\r\n    \"minY\": \"long\",\r\n    \"maxX\": \"long\",\r\n    \"maxY\": \"long\",\r\n    \"hosted\": \"boolean\"\r\n  }\r\n}  "
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/deployment?perPage=200&sortBy=metadata.createdOn&order=desc&keyword={{dataId_raster}}",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"deployment"
							],
							"query": [
								{
									"equals": true,
									"key": "perPage",
									"value": "200"
								},
								{
									"equals": true,
									"key": "sortBy",
									"value": "metadata.createdOn"
								},
								{
									"equals": true,
									"key": "order",
									"value": "desc"
								},
								{
									"equals": true,
									"key": "keyword",
									"value": "{{dataId_raster}}"
								}
							]
						},
						"description": "Test that keyword search works for deployment lists, by searching for the dataId of the ingested Raster file."
					},
					"response": []
				},
				{
					"name": "List Deployment with Keyword (GeoJSON deploymentId)",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"tests[\"Status code is 200\"] = responseCode.code === 200;",
									"var data = JSON.parse(responseBody);",
									"",
									"var found_geojson = false;",
									"var found_keyword = true;",
									"",
									"if (testLevels(tests, data, 'data', 'array')) {",
									"    for (i = 0; i < data.data.length; i++) {",
									"        if (testLevels(tests, data.data[i], 'deploymentId', 'skip', 'data[]')) {",
									"            found_geojson = (found_geojson || data.data[i].deploymentId === postman.getEnvironmentVariable('deploymentId_geojson'));",
									"        }",
									"        found_keyword = found_keyword && JSON.stringify(data.data[i]).match(postman.getEnvironmentVariable('deploymentId_geojson'));",
									"    }",
									"    if (testLevels(tests, data, 'pagination.count') && testLevels(tests, data, 'pagination.perPage')) {",
									"        tests[\"Count is correct\"] = data.pagination.count === data.data.length || data.pagination.perPage === data.data.length;",
									"    }",
									"}",
									"",
									"tests[\"Ingested geoJSON data found in list\"] = found_geojson;",
									"tests[\"All results contain the keyword\"] = found_keyword;"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"name\": \"{{$timestamp}}\",\r\n  \"mapping\": {\r\n    \"dataId\": \"string\",\r\n    \"dataType\": \"string\",\r\n    \"epsg\": \"short\",\r\n    \"minX\": \"long\",\r\n    \"minY\": \"long\",\r\n    \"maxX\": \"long\",\r\n    \"maxY\": \"long\",\r\n    \"hosted\": \"boolean\"\r\n  }\r\n}  "
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/deployment?perPage=200&sortBy=metadata.createdOn&order=desc&keyword={{deploymentId_geojson}}",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"deployment"
							],
							"query": [
								{
									"equals": true,
									"key": "perPage",
									"value": "200"
								},
								{
									"equals": true,
									"key": "sortBy",
									"value": "metadata.createdOn"
								},
								{
									"equals": true,
									"key": "order",
									"value": "desc"
								},
								{
									"equals": true,
									"key": "keyword",
									"value": "{{deploymentId_geojson}}"
								}
							]
						},
						"description": "List deployments (filetered with the geoJSON deploymentId as the keyword), making sure that only that geoJSON deployment is returned."
					},
					"response": []
				},
				{
					"name": "Delete Deployment in Group",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var data = JSON.parse(responseBody);",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"tests[\"Status code is 403\"] = responseCode.code === 403;",
									"",
									"if (testLevels(tests, data, 'type', 'string')) {",
									"    tests[\"Error response\"] = data.type.match(/[Ee]rror/);",
									"}",
									"if (testLevels(tests, data, 'message', 'string')) {",
									"    tests[\"Unable to delete message\"] = data.message.match(/unable.*delet/i);",
									"    tests[\"Deployment Id included in message\"] = data.message.match(postman.getEnvironmentVariable('dataId_raster'));",
									"    tests[\"Deployment Group Id included in message\"] = data.message.match(postman.getEnvironmentVariable('deploymentGroupId'));",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "DELETE",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/deployment/{{deploymentId_raster}}",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"deployment",
								"{{deploymentId_raster}}"
							]
						},
						"description": "Attempt to delete a deployment, the (Local) Raster, without deleting the group to which it was deployed."
					},
					"response": []
				},
				{
					"name": "Delete Deployment Group",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var data = JSON.parse(responseBody);",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"tests[\"Status code is 200\"] = responseCode.code === 200;",
									"",
									"if (testLevels(tests, data, 'type', 'string')) {",
									"    tests[\"Deletion successful\"] = data.type.match(/[Ss]uccess/);",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "DELETE",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/deployment/group/{{deploymentGroupId}}",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"deployment",
								"group",
								"{{deploymentGroupId}}"
							]
						},
						"description": "Delete the geoserver deployment group used throught this test."
					},
					"response": []
				},
				{
					"name": "Delete Deployment Group Again",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var data = JSON.parse(responseBody);",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"tests[\"Status code is 404\"] = responseCode.code === 404;",
									"",
									"if (testLevels(tests, data, 'message', 'string')) {",
									"    tests[\"Does not exist message\"] = data.message.match(/no.*exist/i);",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "DELETE",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/deployment/group/{{deploymentGroupId}}",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"deployment",
								"group",
								"{{deploymentGroupId}}"
							]
						},
						"description": "Verify that a deployment that has already been deleted cannot be deleted again."
					},
					"response": []
				},
				{
					"name": "Deleted Group - Deploy",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 201\"] = responseCode.code === 201;",
									"var data = JSON.parse(responseBody);",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"if (testLevels(tests, data, 'data.jobId')) {",
									"    postman.setEnvironmentVariable(\"jobId\",data.data.jobId);",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": ""
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"dataId\": \"{{dataId_geojson}}\",\r\n  \"deploymentGroupId\": \"{{deploymentGroupId}}\",\r\n  \"deploymentType\": \"geoserver\",\r\n  \"type\": \"access\"\r\n}"
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/deployment",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"deployment"
							]
						},
						"description": "Attempt to make a deployment to a deleted deployment group."
					},
					"response": []
				},
				{
					"name": "Deleted Group - Deploy - Job Status",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var wait = eval(postman.getEnvironmentVariable('wait'));",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"tests[\"Status code is 200\"] = responseCode.code === 200;",
									"",
									"var data = JSON.parse(responseBody);",
									"if (testLevels(tests, data, 'data.status')) {",
									"    if (data.data.status === 'Running' || data.data.status === 'Submitted') {",
									"        if (postman.getEnvironmentVariable('retry_loop') < postman.getEnvironmentVariable('max_retries')) {",
									"            postman.setEnvironmentVariable('retry_loop', parseInt(postman.getEnvironmentVariable('retry_loop')) + 1);",
									"            postman.setNextRequest('Deleted Group - Deploy - Job Status');",
									"            wait(parseInt(postman.getEnvironmentVariable('wait_time')));",
									"        }",
									"        else {",
									"            tests[\"Job finished in time\"] = false;",
									"            postman.setEnvironmentVariable('retry_loop',0);",
									"        }",
									"    }",
									"    else if (data.data.status === 'Error') {",
									"        postman.setEnvironmentVariable('retry_loop',0);",
									"        tests[\"Job finished in time\"] = true;",
									"        if (testLevels(tests, data, 'data.result.details', 'string')) {",
									"            tests[\"Details state Deployment Group does not exist\"] = data.data.result.details.match(/do.*no.*exist/i);",
									"            tests[\"deploymentGroupId included in details\"] = data.data.result.details.match(postman.getEnvironmentVariable('deploymentGroupId'));",
									"        }",
									"    }",
									"    else {",
									"        tests[\"status should not be \" + data.data.status + \" (Bug #9223)\"] = false;",
									"        postman.setEnvironmentVariable('retry_loop',0);",
									"    }",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"type": "any"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": ""
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/job/{{jobId}}",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"job",
								"{{jobId}}"
							]
						},
						"description": "Check that the job to deploy to a deleted deploymentGroup failed."
					},
					"response": []
				},
				{
					"name": "Delete GeoJSON Data",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var data = JSON.parse(responseBody);",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"tests[\"Status code is 200\"] = responseCode.code === 200;",
									"",
									"if (testLevels(tests, data, 'type', 'string')) {",
									"    tests[\"Deletion successful\"] = data.type.match(/[Ss]uccess/);",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "DELETE",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/data/{{dataId_geojson}}",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"data",
								"{{dataId_geojson}}"
							]
						},
						"description": "Delete the ingested geoJSON dataId used throughout this test."
					},
					"response": []
				},
				{
					"name": "Deleted Data - Delete Again",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var data = JSON.parse(responseBody);",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"tests[\"Status code is 404\"] = responseCode.code === 404;",
									"",
									"if (testLevels(tests, data, 'type', 'string')) {",
									"    tests[\"Deletion successful\"] = data.type.match(/[Ee]rror/);",
									"}",
									"if (testLevels(tests, data, 'message', 'string')) {",
									"    tests[\"Not Found Message\"] = data.message.match(/[Nn]o/) && data.message.match(/[Ff]ound/);",
									"    tests[\"Deployment Id included in message\"] = data.message.match(postman.getEnvironmentVariable('dataId_geojson'));",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "DELETE",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/data/{{dataId_geojson}}",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"data",
								"{{dataId_geojson}}"
							]
						},
						"description": "Verify that the data that has already been deleted cannot be deleted again."
					},
					"response": []
				},
				{
					"name": "Deleted Data - GET",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var data = JSON.parse(responseBody);",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"tests[\"Status code is 404\"] = responseCode.code === 404;",
									"",
									"if (testLevels(tests, data, 'type', 'string')) {",
									"    tests[\"Error Type\"] = data.type.match(/[Ee]rror/);",
									"}",
									"if (testLevels(tests, data, 'message', 'string')) {",
									"    tests[\"Not Found Message\"] = data.message.match(/[Nn]o/) && data.message.match(/[Ff]ound/);",
									"    tests[\"Deployment Id included in message\"] = data.message.match(postman.getEnvironmentVariable('dataId_geojson'));",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/data/{{dataId_geojson}}",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"data",
								"{{dataId_geojson}}"
							]
						},
						"description": "Verify that the metadata of a dataId that has been deleted cannot be retrieved."
					},
					"response": []
				},
				{
					"name": "Deleted Data - Download",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var data = JSON.parse(responseBody);",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"tests[\"Status code is 404\"] = responseCode.code === 404;",
									"",
									"if (testLevels(tests, data, 'type', 'string')) {",
									"    tests[\"Deletion successful\"] = data.type.match(/[Ee]rror/);",
									"}",
									"if (testLevels(tests, data, 'message', 'string')) {",
									"    tests[\"Not Found Message\"] = data.message.match(/[Nn]o/) && data.message.match(/[Ff]ound/);",
									"    tests[\"Deployment Id included in message\"] = data.message.match(postman.getEnvironmentVariable('dataId_geojson'));",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/file/{{dataId_geojson}}",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"file",
								"{{dataId_geojson}}"
							]
						},
						"description": "Verify that a deleted dataId cannot be downloaded."
					},
					"response": []
				},
				{
					"name": "Deleted Data - Verify Removed from List",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"tests[\"Status code is 200\"] = responseCode.code === 200;",
									"var data = JSON.parse(responseBody);",
									"",
									"var found_geojson = false;",
									"",
									"if (testLevels(tests, data, 'data', 'array')) {",
									"    for (i = 0; i < data.data.length; i++) {",
									"        if (testLevels(tests, data.data[i], 'dataId', 'skip', 'data[]')) {",
									"            found_geojson = (found_geojson || data.data[i].dataId === postman.getEnvironmentVariable('dataId_geojson'));",
									"        }",
									"    }",
									"}",
									"",
									"tests[\"Ingested GeoJSON removed from list\"] = !found_geojson;"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"name\": \"{{$timestamp}}\",\r\n  \"mapping\": {\r\n    \"dataId\": \"string\",\r\n    \"dataType\": \"string\",\r\n    \"epsg\": \"short\",\r\n    \"minX\": \"long\",\r\n    \"minY\": \"long\",\r\n    \"maxX\": \"long\",\r\n    \"maxY\": \"long\",\r\n    \"hosted\": \"boolean\"\r\n  }\r\n}  "
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/data?perPage=200&sortBy=metadata.createdOn&order=desc",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"data"
							],
							"query": [
								{
									"key": "perPage",
									"value": "200"
								},
								{
									"key": "sortBy",
									"value": "metadata.createdOn"
								},
								{
									"key": "order",
									"value": "desc"
								}
							]
						},
						"description": "Retrun a list of dataIds, and verify that the one that was deleted is not present."
					},
					"response": []
				},
				{
					"name": "Deleted Data - Verify DeploymentId Deleted",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var data = JSON.parse(responseBody);",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"tests[\"Status code is 404\"] = responseCode.code === 404;",
									"",
									"if (testLevels(tests, data, 'message', 'string')) {",
									"    tests[\"Not Found Message\"] = data.message.match(/[Nn]o/) && data.message.match(/[Ff]ound/);",
									"    tests[\"Deployment Id included in message\"] = data.message.match(postman.getEnvironmentVariable('deploymentId_geojson'));",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/deployment/{{deploymentId_geojson}}",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"deployment",
								"{{deploymentId_geojson}}"
							]
						},
						"description": "After deleting the geoJSON dataId, verify that the corresponding deploymentId was deleted."
					},
					"response": []
				},
				{
					"name": "Deleted Data - Deploy",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 201\"] = responseCode.code === 201;",
									"var data = JSON.parse(responseBody);",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"if (testLevels(tests, data, 'data.jobId')) {",
									"    postman.setEnvironmentVariable(\"jobId\",data.data.jobId);",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": ""
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"dataId\": \"{{dataId_geojson}}\",\r\n  \"deploymentType\": \"geoserver\",\r\n  \"type\": \"access\"\r\n}"
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/deployment",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"deployment"
							]
						},
						"description": "Attempt to create a deployment with a dataId that has been deleted."
					},
					"response": []
				},
				{
					"name": "Deleted Data - Deploy - Job Status",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var wait = eval(postman.getEnvironmentVariable('wait'));",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"tests[\"Status code is 200\"] = responseCode.code === 200;",
									"",
									"var data = JSON.parse(responseBody);",
									"if (testLevels(tests, data, 'data.status')) {",
									"    if (data.data.status === 'Running' || data.data.status === 'Submitted') {",
									"        if (postman.getEnvironmentVariable('retry_loop') < postman.getEnvironmentVariable('max_retries')) {",
									"            postman.setEnvironmentVariable('retry_loop', parseInt(postman.getEnvironmentVariable('retry_loop')) + 1);",
									"            postman.setNextRequest('Deleted Data - Deploy - Job Status');",
									"            wait(parseInt(postman.getEnvironmentVariable('wait_time')));",
									"        }",
									"        else {",
									"            tests[\"Job finished in time\"] = false;",
									"            postman.setEnvironmentVariable('retry_loop',0);",
									"        }",
									"    }",
									"    else if (data.data.status === 'Error') {",
									"        postman.setEnvironmentVariable('retry_loop',0);",
									"        tests[\"Job finished in time\"] = true;",
									"        if (testLevels(tests, data, 'data.result.details', 'string')) {",
									"            tests[\"Details state dataId does not exist\"] = data.data.result.details.match(/do.*no.*exist/i);",
									"            tests[\"dataId included in details\"] = data.data.result.details.match(postman.getEnvironmentVariable('dataId_geojson'));",
									"        }",
									"    }",
									"    else {",
									"        tests[\"status should not be \" + data.data.status + \" (Bug #9223)\"] = false;",
									"        postman.setEnvironmentVariable('retry_loop',0);",
									"    }",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"type": "any"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": ""
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/job/{{jobId}}",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"job",
								"{{jobId}}"
							]
						},
						"description": "Check that the attempted deployment of a deleted dataId failed."
					},
					"response": []
				},
				{
					"name": "Deleted Data - Verify Removed from ES",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"tests[\"Status code is 200 (Bug #11888)\"] = responseCode.code === 200;",
									"var data = JSON.parse(responseBody);",
									"",
									"var found_geojson = false;",
									"",
									"if (testLevels(tests, data, 'data', 'array')) {",
									"    for (i = 0; i < data.data.length; i++) {",
									"        if (testLevels(tests, data.data[i], 'dataId', 'skip', 'data[]')) {",
									"            found_geojson = (found_geojson || data.data[i].dataId === postman.getEnvironmentVariable('dataId_geojson'));",
									"        }",
									"    }",
									"}",
									"",
									"tests[\"Ingested GeoJSON removed from list (Bug #9174)\"] = !found_geojson;"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"query\": {\n        \"match\": {\n            \"dataResource.metadata.description\": \"integration\"\n        }\n    }\n}"
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/data/query",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"data",
								"query"
							]
						},
						"description": "Query the /data/query (Elastic Search) endpoint to verify that the deleted dataId is not present in the result."
					},
					"response": []
				},
				{
					"name": "Delete Raster Deployment",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var data = JSON.parse(responseBody);",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"tests[\"Status code is 200\"] = responseCode.code === 200;",
									"",
									"if (testLevels(tests, data, 'type', 'string')) {",
									"    tests[\"Deletion successful\"] = data.type.match(/[Ss]uccess/);",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "DELETE",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/deployment/{{deploymentId_raster}}",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"deployment",
								"{{deploymentId_raster}}"
							]
						},
						"description": "Delete the (Local) Raster deployment used in this suite of tests."
					},
					"response": []
				},
				{
					"name": "Deleted Deployment - Delete Again",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var data = JSON.parse(responseBody);",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"tests[\"Status code is 404\"] = responseCode.code === 404;",
									"",
									"if (testLevels(tests, data, 'type', 'string')) {",
									"    tests[\"Deletion successful\"] = data.type.match(/[Ee]rror/);",
									"}",
									"if (testLevels(tests, data, 'message', 'string')) {",
									"    tests[\"Not Found Message\"] = data.message.match(/[Nn]o/) && data.message.match(/[Ff]ound/);",
									"    tests[\"Deployment Id included in message\"] = data.message.match(postman.getEnvironmentVariable('deploymentId_raster'));",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "DELETE",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/deployment/{{deploymentId_raster}}",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"deployment",
								"{{deploymentId_raster}}"
							]
						},
						"description": "Try to delete a deployment after it has already been deleted."
					},
					"response": []
				},
				{
					"name": "Deleted Deployment - GET",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var data = JSON.parse(responseBody);",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"tests[\"Status code is 404\"] = responseCode.code === 404;",
									"",
									"if (testLevels(tests, data, 'type', 'string')) {",
									"    tests[\"Deletion successful\"] = data.type.match(/[Ee]rror/);",
									"}",
									"if (testLevels(tests, data, 'message', 'string')) {",
									"    tests[\"Not Found Message\"] = data.message.match(/[Nn]o/) && data.message.match(/[Ff]ound/);",
									"    tests[\"Deployment Id included in message\"] = data.message.match(postman.getEnvironmentVariable('deploymentId_raster'));",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/deployment/{{deploymentId_raster}}",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"deployment",
								"{{deploymentId_raster}}"
							]
						},
						"description": "Attempt to retrieve the metadata of the deleted deployment."
					},
					"response": []
				},
				{
					"name": "Deleted Deployment - Verify Removed from List",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"tests[\"Status code is 200\"] = responseCode.code === 200;",
									"var data = JSON.parse(responseBody);",
									"",
									"var found_geojson = false;",
									"",
									"if (testLevels(tests, data, 'data', 'array')) {",
									"    for (i = 0; i < data.data.length; i++) {",
									"        if (testLevels(tests, data.data[i], 'deploymentId', 'skip', 'data[]')) {",
									"            found_geojson = (found_geojson || data.data[i].deploymentId === postman.getEnvironmentVariable('deploymentId_raster'));",
									"        }",
									"    }",
									"}",
									"",
									"tests[\"Deployed raster removed from list\"] = !found_geojson;"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"name\": \"{{$timestamp}}\",\r\n  \"mapping\": {\r\n    \"dataId\": \"string\",\r\n    \"dataType\": \"string\",\r\n    \"epsg\": \"short\",\r\n    \"minX\": \"long\",\r\n    \"minY\": \"long\",\r\n    \"maxX\": \"long\",\r\n    \"maxY\": \"long\",\r\n    \"hosted\": \"boolean\"\r\n  }\r\n}  "
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/deployment?perPage=200&sortBy=createdOn&order=desc",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"deployment"
							],
							"query": [
								{
									"key": "perPage",
									"value": "200"
								},
								{
									"key": "sortBy",
									"value": "createdOn"
								},
								{
									"key": "order",
									"value": "desc"
								}
							]
						},
						"description": "Retrun a list of deploymentIds, and verify that the one that was deleted is not present."
					},
					"response": []
				},
				{
					"name": "Deploy Text",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 201\"] = responseCode.code === 201;",
									"var data = JSON.parse(responseBody);",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"if (testLevels(tests, data, 'data.jobId')) {",
									"    postman.setEnvironmentVariable(\"jobId\",data.data.jobId);",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": ""
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"dataId\": \"{{dataId_text}}\",\r\n  \"deploymentType\": \"geoserver\",\r\n  \"type\": \"access\"\r\n}"
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/deployment",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"deployment"
							]
						},
						"description": "Attempt to deploy ingested text to geoserver."
					},
					"response": []
				},
				{
					"name": "Deploy Text Job Status",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var wait = eval(postman.getEnvironmentVariable('wait'));",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"tests[\"Status code is 200\"] = responseCode.code === 200;",
									"",
									"var data = JSON.parse(responseBody);",
									"if (testLevels(tests, data, 'data.status')) {",
									"    if (data.data.status === 'Running' || data.data.status === 'Submitted') {",
									"        if (postman.getEnvironmentVariable('retry_loop') < postman.getEnvironmentVariable('max_retries')) {",
									"            postman.setEnvironmentVariable('retry_loop', parseInt(postman.getEnvironmentVariable('retry_loop')) + 1);",
									"            postman.setNextRequest('Deploy Text Job Status');",
									"            wait(parseInt(postman.getEnvironmentVariable('wait_time')));",
									"        }",
									"        else {",
									"            tests[\"Job finished in time\"] = false;",
									"            postman.setEnvironmentVariable('retry_loop',0);",
									"        }",
									"    }",
									"    else if (data.data.status === 'Error') {",
									"        postman.setEnvironmentVariable('retry_loop',0);",
									"        tests[\"Job finished in time\"] = true;",
									"        if (testLevels(tests, data, 'data.result.details', 'string')) {",
									"            tests[\"Details mention that 'text' type cannot be deployed\"] = data.data.result.details.match(/no.*deploy/i) && data.data.result.details.match(/type/i) && data.data.result.details.match(/text/i);",
									"        }",
									"    }",
									"    else {",
									"        tests[\"status should not be \" + data.data.status] = false;",
									"        postman.setEnvironmentVariable('retry_loop',0);",
									"    }",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"type": "any"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": ""
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/job/{{jobId}}",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"job",
								"{{jobId}}"
							]
						},
						"description": "Verify that the job to deploy text to geoserver failed."
					},
					"response": []
				},
				{
					"name": "Deploy - No type",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 400\"] = responseCode.code === 400;",
									"var data = JSON.parse(responseBody);",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"if (testLevels(tests, data, 'message', 'string')) {",
									"    tests[\"Missing Type message\"] = data.message.match(/missing.*type/i);",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": ""
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"dataId\": \"{{dataId_external}}\",\r\n  \"deploymentType\": \"geoserver\"\r\n}"
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/deployment",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"deployment"
							]
						},
						"description": "Attempt a deployment without specifying the \"type\" parameter."
					},
					"response": []
				},
				{
					"name": "Deploy - No deploymentType",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 400\"] = responseCode.code === 400;",
									"var data = JSON.parse(responseBody);",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"if (testLevels(tests, data, 'errors', 'array')) {",
									"    if (testLevels(tests, data.errors[0], 'field', 'skip', 'errors[0].')) {",
									"        tests[\"Problem with deploymentType\"] = data.errors[0].field === 'deploymentType';",
									"    }",
									"    if (testLevels(tests, data.errors[0], 'defaultMessage', 'string', 'errors[0].')) {",
									"        tests[\"Cannot Be Null Message\"] = data.errors[0].defaultMessage.match(/null/i);",
									"    }",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": ""
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"dataId\": \"{{dataId_external}}\",\r\n  \"type\": \"access\"\r\n}"
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/deployment",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"deployment"
							]
						},
						"description": "Attempt a deployment without specifying the \"deploymentType\" parameter."
					},
					"response": []
				},
				{
					"name": "Deploy - No dataId",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 400\"] = responseCode.code === 400;",
									"var data = JSON.parse(responseBody);",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"if (testLevels(tests, data, 'errors', 'array')) {",
									"    if (testLevels(tests, data.errors[0], 'field', 'skip', 'errors[0].')) {",
									"        tests[\"Problem with deploymentType\"] = data.errors[0].field === 'dataId';",
									"    }",
									"    if (testLevels(tests, data.errors[0], 'defaultMessage', 'string', 'errors[0].')) {",
									"        tests[\"Cannot Be Null Message\"] = data.errors[0].defaultMessage.match(/null/i);",
									"    }",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": ""
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"deploymentType\": \"geoserver\",\r\n  \"type\": \"access\"\r\n}"
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/deployment",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"deployment"
							]
						},
						"description": "Attempt a deployment without specifying the \"dataId\" parameter."
					},
					"response": []
				},
				{
					"name": "Ingest Text - No type",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 400\"] = responseCode.code === 400;",
									"var data = JSON.parse(responseBody);",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"if (testLevels(tests, data, 'message', 'string')) {",
									"    tests[\"Missing Type message\"] = data.message.match(/missing.*type/i);",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": ""
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"data\": {\r\n    \"dataType\": {\r\n        \"content\": \"{{Ingested Text}}\",\r\n        \"type\": \"text\"\r\n    },\r\n    \"metadata\": {\r\n        \"description\": \"A file for integration tests.\"\r\n    }\r\n  },\r\n  \"host\": false\r\n}"
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/data",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"data"
							]
						},
						"description": "Attempt a text ingest without specifying the \"type\" parameter."
					},
					"response": []
				},
				{
					"name": "Ingest Text - No host",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 400\"] = responseCode.code === 400;",
									"var data = JSON.parse(responseBody);",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"if (testLevels(tests, data, 'errors', 'array')) {",
									"    if (testLevels(tests, data.errors[0], 'field', 'skip', 'errors[0].')) {",
									"        tests[\"Problem with deploymentType\"] = data.errors[0].field === 'host';",
									"    }",
									"    if (testLevels(tests, data.errors[0], 'defaultMessage', 'string', 'errors[0].')) {",
									"        tests[\"Cannot Be Null Message\"] = data.errors[0].defaultMessage.match(/null/i);",
									"    }",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": ""
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"data\": {\r\n    \"dataType\": {\r\n        \"content\": \"{{Ingested Text}}\",\r\n        \"type\": \"text\"\r\n    },\r\n    \"metadata\": {\r\n        \"description\": \"A file for integration tests.\"\r\n    }\r\n  },\r\n  \"type\": \"ingest\"\r\n}"
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/data",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"data"
							]
						},
						"description": "Attempt a text ingest without specifying the \"host\" parameter."
					},
					"response": []
				},
				{
					"name": "Ingest Text - No dataType",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 400\"] = responseCode.code === 400;",
									"var data = JSON.parse(responseBody);",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"if (testLevels(tests, data, 'errors', 'array')) {",
									"    if (testLevels(tests, data.errors[0], 'field', 'skip', 'errors[0].')) {",
									"        tests[\"Problem with deploymentType\"] = data.errors[0].field === 'data.dataType';",
									"    }",
									"    if (testLevels(tests, data.errors[0], 'defaultMessage', 'string', 'errors[0].')) {",
									"        tests[\"Cannot Be Null Message\"] = data.errors[0].defaultMessage.match(/null/i);",
									"    }",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": ""
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"data\": {\r\n    \"metadata\": {\r\n        \"description\": \"A file for integration tests.\"\r\n    }\r\n  },\r\n  \"type\": \"ingest\",\r\n  \"host\": false\r\n}"
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/data",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"data"
							]
						},
						"description": "Attempt a text ingest without specifying the \"dataType\" parameter."
					},
					"response": []
				},
				{
					"name": "Ingest Text - No dataType.type",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 400\"] = responseCode.code === 400;",
									"var data = JSON.parse(responseBody);",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"if (testLevels(tests, data, 'message', 'string')) {",
									"    tests[\"Missing Type message\"] = data.message.match(/missing.*type/i);",
									"    tests[\"Mentions 'data.dataType' object\"] = data.message.match(/data\\.dataType/i);",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": ""
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"data\": {\r\n    \"dataType\": {\r\n        \"content\": \"{{Ingested Text}}\"\r\n    },\r\n    \"metadata\": {\r\n        \"description\": \"A file for integration tests.\"\r\n    }\r\n  },\r\n  \"type\": \"ingest\",\r\n  \"host\": false\r\n}"
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/data",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"data"
							]
						},
						"description": "Attempt a text ingest without specifying the \"dataType.type\" parameter."
					},
					"response": []
				},
				{
					"name": "Ingest Text - No dataType.content",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 400\"] = responseCode.code === 400;",
									"var data = JSON.parse(responseBody);",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"if (testLevels(tests, data, 'errors', 'array')) {",
									"    if (testLevels(tests, data.errors[0], 'field', 'skip', 'errors[0].')) {",
									"        tests[\"Problem with deploymentType\"] = data.errors[0].field === 'data.dataType.content';",
									"    }",
									"    if (testLevels(tests, data.errors[0], 'defaultMessage', 'string', 'errors[0].')) {",
									"        tests[\"Cannot Be Null Message\"] = data.errors[0].defaultMessage.match(/null/i);",
									"    }",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": ""
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"data\": {\r\n    \"dataType\": {\r\n        \"type\": \"text\"\r\n    },\r\n    \"metadata\": {\r\n        \"description\": \"A file for integration tests.\"\r\n    }\r\n  },\r\n  \"type\": \"ingest\",\r\n  \"host\": false\r\n}"
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/data",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"data"
							]
						},
						"description": "Attempt a text ingest without specifying the \"dataType.content\" parameter."
					},
					"response": []
				},
				{
					"name": "Deploy - Bad type",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 400\"] = responseCode.code === 400;",
									"var data = JSON.parse(responseBody);",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"if (testLevels(tests, data, 'message', 'string')) {",
									"    tests[\"Bad Type message\"] = data.message.match(/type/i);",
									"    tests[\"Good options given\"] = data.message.match(/known.*\\[(.*,?)*\\]/i);",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": ""
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"dataId\": \"{{dataId_geojson}}\",\r\n  \"deploymentType\": \"geoserver\",\r\n  \"type\": \"~access\"\r\n}"
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/deployment",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"deployment"
							]
						},
						"description": "Attempt a deployment with an invalid \"type\" parameter."
					},
					"response": []
				},
				{
					"name": "Deploy - Bad deploymentType",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 201\"] = responseCode.code === 201;",
									"var data = JSON.parse(responseBody);",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"if (testLevels(tests, data, 'data.jobId')) {",
									"    postman.setEnvironmentVariable(\"jobId\",data.data.jobId);",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": ""
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"dataId\": \"{{dataId_geojson}}\",\r\n  \"deploymentType\": \"~geoserver\",\r\n  \"type\": \"access\"\r\n}"
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/deployment",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"deployment"
							]
						},
						"description": "Attempt a deployment with an invalid \"deploymentType\" parameter."
					},
					"response": []
				},
				{
					"name": "Deploy - Bad deploymentType - Job Status",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var wait = eval(postman.getEnvironmentVariable('wait'));",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"tests[\"Status code is 200\"] = responseCode.code === 200;",
									"",
									"var data = JSON.parse(responseBody);",
									"if (testLevels(tests, data, 'data.status')) {",
									"    if (data.data.status === 'Running' || data.data.status === 'Submitted') {",
									"        if (postman.getEnvironmentVariable('retry_loop') < postman.getEnvironmentVariable('max_retries')) {",
									"            postman.setEnvironmentVariable('retry_loop', parseInt(postman.getEnvironmentVariable('retry_loop')) + 1);",
									"            postman.setNextRequest('Deploy - Bad deploymentType - Job Status');",
									"            wait(parseInt(postman.getEnvironmentVariable('wait_time')));",
									"        }",
									"        else {",
									"            tests[\"Job finished in time\"] = false;",
									"            postman.setEnvironmentVariable('retry_loop',0);",
									"        }",
									"    }",
									"    else if (data.data.status === 'Error') {",
									"        postman.setEnvironmentVariable('retry_loop',0);",
									"        tests[\"Job finished in time\"] = true;",
									"        if (testLevels(tests, data, 'data.result.details', 'string')) {",
									"            tests[\"Details mention that '~geoserver' is an unknown deployment type\"] = data.data.result.details.match(/unknown/i) && data.data.result.details.match(/type/i) && data.data.result.details.match(/~geoserver/i);",
									"        }",
									"    }",
									"    else {",
									"        tests[\"status should not be \" + data.data.status] = false;",
									"        postman.setEnvironmentVariable('retry_loop',0);",
									"    }",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"type": "any"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": ""
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/job/{{jobId}}",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"job",
								"{{jobId}}"
							]
						},
						"description": "Check that the job to deploy with a bad \"deploymentType\" parameter failed."
					},
					"response": []
				},
				{
					"name": "Ingest Text - Bad type",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 400\"] = responseCode.code === 400;",
									"var data = JSON.parse(responseBody);",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"if (testLevels(tests, data, 'message', 'string')) {",
									"    tests[\"Bad Type message\"] = data.message.match(/type/i);",
									"    tests[\"Good options given\"] = data.message.match(/known.*\\[(.*,?)*\\]/i);",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": ""
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"data\": {\r\n    \"dataType\": {\r\n        \"content\": \"{{Ingested Text}}\",\r\n        \"type\": \"text\"\r\n    },\r\n    \"metadata\": {\r\n        \"description\": \"A file for integration tests.\"\r\n    }\r\n  },\r\n  \"host\": false,\r\n  \"type\": \"~ingest\"\r\n}"
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/data",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"data"
							]
						},
						"description": "Attempt a text ingest with an invalid \"type\" parameter."
					},
					"response": []
				},
				{
					"name": "Ingest Text - Bad dataType.type",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 400\"] = responseCode.code === 400;",
									"var data = JSON.parse(responseBody);",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"if (testLevels(tests, data, 'message', 'string')) {",
									"    tests[\"Bad Type message\"] = data.message.match(/type/i);",
									"    tests[\"Mentions 'data.dataType' object\"] = data.message.match(/data\\.dataType/i);",
									"    tests[\"Good options given\"] = data.message.match(/known.*\\[(.*,?)*\\]/i);",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": ""
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"data\": {\r\n    \"dataType\": {\r\n        \"content\": {\r\n          \"bad\": \"content\"\r\n        },\r\n        \"type\": \"~text\"\r\n    },\r\n    \"metadata\": {\r\n        \"description\": \"A file for integration tests.\"\r\n    }\r\n  },\r\n  \"host\": false,\r\n  \"type\": \"ingest\"\r\n}"
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/data",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"data"
							]
						},
						"description": "Attempt a text ingest with an invalid \"dataType.type\" parameter."
					},
					"response": []
				},
				{
					"name": "Ingest Local Raster - No Attached File",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 400\"] = responseCode.code === 400;",
									"var data = JSON.parse(responseBody);",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"if (testLevels(tests, data, 'message', 'string')) {",
									"    tests[\"File not present\"] = data.message.match(/file.*no.*present/i);",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": ""
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "data",
									"type": "text",
									"value": "{ \"type\": \"ingest\", \"host\": \"true\", \"data\" : { \"dataType\": { \"type\": \"raster\" }, \"metadata\": { \"name\": \"terrametrics.tif\", \"description\": \"A file for integration tests.\", \"classType\": { \"classification\": \"unclassified\" } } } }"
								}
							]
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/data/file",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"data",
								"file"
							]
						},
						"description": "Attempt to ingest a file without attaching a file to ingest."
					},
					"response": []
				},
				{
					"name": "Ingest Text - Content as Object",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 400\"] = responseCode.code === 400;",
									"var data = JSON.parse(responseBody);",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"if (testLevels(tests, data, 'message', 'string')) {",
									"    tests[\"Bad content message\"] = data.message.match(/content/i);",
									"    tests[\"Problem with OBJECT\"] = data.message.match(/object/i);",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": ""
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"data\": {\r\n    \"dataType\": {\r\n        \"content\": {\r\n          \"bad\": \"content\"\r\n        },\r\n        \"type\": \"text\"\r\n    },\r\n    \"metadata\": {\r\n        \"description\": \"A file for integration tests.\"\r\n    }\r\n  },\r\n  \"host\": false,\r\n  \"type\": \"ingest\"\r\n}"
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/data",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"data"
							]
						},
						"description": "Attempt to ingest test with \"content\": {}."
					},
					"response": []
				},
				{
					"name": "Ingest Text - Content as Array",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 400\"] = responseCode.code === 400;",
									"var data = JSON.parse(responseBody);",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"if (testLevels(tests, data, 'message', 'string')) {",
									"    tests[\"Bad content message\"] = data.message.match(/content/i);",
									"    tests[\"Problem with ARRAY\"] = data.message.match(/array/i);",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": ""
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"data\": {\r\n    \"dataType\": {\r\n        \"content\": [\r\n          \"should\",\r\n          \"not\",\r\n          \"be\",\r\n          \"array\"\r\n          ],\r\n        \"type\": \"text\"\r\n    },\r\n    \"metadata\": {\r\n        \"description\": \"A file for integration tests.\"\r\n    }\r\n  },\r\n  \"host\": false,\r\n  \"type\": \"ingest\"\r\n}"
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/data",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"data"
							]
						},
						"description": "Attempt to ingest test with \"content\": []."
					},
					"response": []
				}
			]
		},
		{
			"name": "5_Teardown",
			"description": "",
			"item": [
				{
					"name": "Delete Raster Data",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var data = JSON.parse(responseBody);",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"tests[\"Status code is 200\"] = responseCode.code === 200;",
									"",
									"if (testLevels(tests, data, 'type', 'string')) {",
									"    tests[\"Deletion successful\"] = data.type.match(/[Ss]uccess/);",
									"}"
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									"console.log(\"~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\");",
									"console.log(\" < < < < < < < < < < < < TEAR-DOWN > > > > > > > > > > > \");",
									"console.log(\"These tests destroy any items created by previous tests. \");",
									"console.log(\" These tests represent important features, like DELETEs. \");",
									"console.log(\"            DO NOT PUSH if these tests fail.             \");",
									"console.log(\"~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\");"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "DELETE",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/data/{{dataId_raster}}",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"data",
								"{{dataId_raster}}"
							]
						},
						"description": "Delete the (local) raster dataId used in this suite of tests."
					},
					"response": []
				},
				{
					"name": "Delete Shape Data",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var data = JSON.parse(responseBody);",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"tests[\"Status code is 200\"] = responseCode.code === 200;",
									"",
									"if (testLevels(tests, data, 'type', 'string')) {",
									"    tests[\"Deletion successful\"] = data.type.match(/[Ss]uccess/);",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "DELETE",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/data/{{dataId_shape}}",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"data",
								"{{dataId_shape}}"
							]
						},
						"description": "Delete the shape dataId used in this suite of tests."
					},
					"response": []
				},
				{
					"name": "Delete Text Data",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var data = JSON.parse(responseBody);",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"tests[\"Status code is 200\"] = responseCode.code === 200;",
									"",
									"if (testLevels(tests, data, 'type', 'string')) {",
									"    tests[\"Deletion successful\"] = data.type.match(/[Ss]uccess/);",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "DELETE",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/data/{{dataId_text}}",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"data",
								"{{dataId_text}}"
							]
						},
						"description": "Delete the text dataId used in this suite of tests."
					},
					"response": []
				},
				{
					"name": "Delete External Raster Data",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var data = JSON.parse(responseBody);",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"tests[\"Status code is 200\"] = responseCode.code === 200;",
									"",
									"if (testLevels(tests, data, 'type', 'string')) {",
									"    tests[\"Deletion successful\"] = data.type.match(/[Ss]uccess/);",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "DELETE",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/data/{{dataId_external}}",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"data",
								"{{dataId_external}}"
							]
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "Delete Large GeoJSON Data",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var data = JSON.parse(responseBody);",
									"var testLevels = eval(postman.getEnvironmentVariable('testLevels'));",
									"",
									"tests[\"Status code is 200\"] = responseCode.code === 200;",
									"",
									"if (testLevels(tests, data, 'type', 'string')) {",
									"    tests[\"Deletion successful\"] = data.type.match(/[Ss]uccess/);",
									"}"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "{{API Key}}",
									"type": "string"
								},
								{
									"key": "password",
									"value": "",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"value": true,
									"type": "boolean"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "DELETE",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "https://pz-gateway.{{domain}}/data/{{dataId_geojson_large}}",
							"protocol": "https",
							"host": [
								"pz-gateway",
								"{{domain}}"
							],
							"path": [
								"data",
								"{{dataId_geojson_large}}"
							]
						},
						"description": "Delete the (Large) geoJSON data used in this suite of tests."
					},
					"response": []
				}
			]
		}
	]
}